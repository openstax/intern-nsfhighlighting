{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "h/static/scripts/base/controller.js",
    "h/static/scripts/base/raven.js",
    "h/static/scripts/base/settings.js",
    "h/static/scripts/base/upgrade-elements.js",
    "h/static/scripts/controllers/autosuggest-dropdown-controller.js",
    "h/static/scripts/controllers/character-limit-controller.js",
    "h/static/scripts/controllers/confirm-submit-controller.js",
    "h/static/scripts/controllers/copy-button-controller.js",
    "h/static/scripts/controllers/create-group-form-controller.js",
    "h/static/scripts/controllers/dropdown-menu-controller.js",
    "h/static/scripts/controllers/form-controller.js",
    "h/static/scripts/controllers/form-select-onfocus-controller.js",
    "h/static/scripts/controllers/input-autofocus-controller.js",
    "h/static/scripts/controllers/lozenge-controller.js",
    "h/static/scripts/controllers/search-bar-controller.js",
    "h/static/scripts/controllers/search-bucket-controller.js",
    "h/static/scripts/controllers/share-widget-controller.js",
    "h/static/scripts/controllers/signup-form-controller.js",
    "h/static/scripts/controllers/tooltip-controller.js",
    "h/static/scripts/polyfills.js",
    "h/static/scripts/site.js",
    "h/static/scripts/util/dom.js",
    "h/static/scripts/util/modal-focus.js",
    "h/static/scripts/util/search-text-parser.js",
    "h/static/scripts/util/string.js",
    "h/static/scripts/util/submit-form.js",
    "h/static/scripts/util/update-helpers.js",
    "node_modules/core-js/es6/promise.js",
    "node_modules/core-js/fn/array/find-index.js",
    "node_modules/core-js/fn/array/find.js",
    "node_modules/core-js/fn/array/from.js",
    "node_modules/core-js/fn/array/includes.js",
    "node_modules/core-js/fn/object/assign.js",
    "node_modules/core-js/fn/string/starts-with.js",
    "node_modules/core-js/modules/$.a-function.js",
    "node_modules/core-js/modules/$.add-to-unscopables.js",
    "node_modules/core-js/modules/$.an-object.js",
    "node_modules/core-js/modules/$.array-includes.js",
    "node_modules/core-js/modules/$.array-methods.js",
    "node_modules/core-js/modules/$.array-species-create.js",
    "node_modules/core-js/modules/$.classof.js",
    "node_modules/core-js/modules/$.cof.js",
    "node_modules/core-js/modules/$.core.js",
    "node_modules/core-js/modules/$.ctx.js",
    "node_modules/core-js/modules/$.defined.js",
    "node_modules/core-js/modules/$.descriptors.js",
    "node_modules/core-js/modules/$.dom-create.js",
    "node_modules/core-js/modules/$.export.js",
    "node_modules/core-js/modules/$.fails-is-regexp.js",
    "node_modules/core-js/modules/$.fails.js",
    "node_modules/core-js/modules/$.for-of.js",
    "node_modules/core-js/modules/$.global.js",
    "node_modules/core-js/modules/$.has.js",
    "node_modules/core-js/modules/$.hide.js",
    "node_modules/core-js/modules/$.html.js",
    "node_modules/core-js/modules/$.invoke.js",
    "node_modules/core-js/modules/$.iobject.js",
    "node_modules/core-js/modules/$.is-array-iter.js",
    "node_modules/core-js/modules/$.is-array.js",
    "node_modules/core-js/modules/$.is-object.js",
    "node_modules/core-js/modules/$.is-regexp.js",
    "node_modules/core-js/modules/$.iter-call.js",
    "node_modules/core-js/modules/$.iter-create.js",
    "node_modules/core-js/modules/$.iter-define.js",
    "node_modules/core-js/modules/$.iter-detect.js",
    "node_modules/core-js/modules/$.iter-step.js",
    "node_modules/core-js/modules/$.iterators.js",
    "node_modules/core-js/modules/$.js",
    "node_modules/core-js/modules/$.library.js",
    "node_modules/core-js/modules/$.microtask.js",
    "node_modules/core-js/modules/$.object-assign.js",
    "node_modules/core-js/modules/$.property-desc.js",
    "node_modules/core-js/modules/$.redefine-all.js",
    "node_modules/core-js/modules/$.redefine.js",
    "node_modules/core-js/modules/$.same-value.js",
    "node_modules/core-js/modules/$.set-proto.js",
    "node_modules/core-js/modules/$.set-species.js",
    "node_modules/core-js/modules/$.set-to-string-tag.js",
    "node_modules/core-js/modules/$.shared.js",
    "node_modules/core-js/modules/$.species-constructor.js",
    "node_modules/core-js/modules/$.strict-new.js",
    "node_modules/core-js/modules/$.string-at.js",
    "node_modules/core-js/modules/$.string-context.js",
    "node_modules/core-js/modules/$.task.js",
    "node_modules/core-js/modules/$.to-index.js",
    "node_modules/core-js/modules/$.to-integer.js",
    "node_modules/core-js/modules/$.to-iobject.js",
    "node_modules/core-js/modules/$.to-length.js",
    "node_modules/core-js/modules/$.to-object.js",
    "node_modules/core-js/modules/$.uid.js",
    "node_modules/core-js/modules/$.wks.js",
    "node_modules/core-js/modules/core.get-iterator-method.js",
    "node_modules/core-js/modules/es6.array.find-index.js",
    "node_modules/core-js/modules/es6.array.find.js",
    "node_modules/core-js/modules/es6.array.from.js",
    "node_modules/core-js/modules/es6.array.iterator.js",
    "node_modules/core-js/modules/es6.object.assign.js",
    "node_modules/core-js/modules/es6.object.to-string.js",
    "node_modules/core-js/modules/es6.promise.js",
    "node_modules/core-js/modules/es6.string.iterator.js",
    "node_modules/core-js/modules/es6.string.starts-with.js",
    "node_modules/core-js/modules/es7.array.includes.js",
    "node_modules/core-js/modules/web.dom.iterable.js",
    "node_modules/element-closest/element-closest.js",
    "node_modules/element-dataset/lib/index-browser.js",
    "node_modules/escape-html/index.js",
    "node_modules/js-polyfills/url.js",
    "node_modules/keyboardevent-key-polyfill/index.js",
    "node_modules/process/browser.js",
    "node_modules/raf/index.js",
    "node_modules/raf/node_modules/performance-now/lib/performance-now.js",
    "node_modules/scroll-into-view/scrollIntoView.js",
    "node_modules/whatwg-fetch/fetch.js"
  ],
  "names": [],
  "mappings": "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,EAAuB;;AAEtC,QAAI,EAAE,MAAM,OAAN,CAAc,KAAd,KAAwB,MAAM,OAAN,CAAc,KAAd,CAA1B,CAAJ,EAAqD;AACnD,aAAO,IAAP;AACD;;AAED,QAAI,MAAM,MAAN,KAAiB,MAAM,MAA3B,EAAmC;AACjC,aAAO,IAAP;AACD;;AAED,WAAO,CAAC,MAAM,KAAN,CAAY,UAAC,IAAD,EAAO,KAAP,EAAiB;AACnC,aAAO,SAAS,MAAM,KAAN,CAAhB;AACD,KAFO,CAAR;AAGD;AAvBc,CAAjB;;;ACFA;AACA;AACA;AACA;AACA;;ACJA;AACA;;ACDA;AACA;;ACDA;AACA;AACA;;ACFA;AACA;;ACDA;AACA;;ACDA;AACA;;ACDA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;;ACJA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;;ACFA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "'use strict';\n\nconst { findRefs } = require('../util/dom');\n\n/*\n * @typedef {Object} ControllerOptions\n * @property {Function} [reload] - A function that replaces the content of\n *           the current element with new markup (eg. returned by an XHR request\n *           to the server) and returns the new root Element.\n */\n\n/**\n * Base class for controllers that upgrade elements with additional\n * functionality.\n *\n * - Child elements with `data-ref=\"$name\"` attributes are exposed on the\n *   controller as `this.refs.$name`.\n * - The element passed to the controller is exposed via the `element` property\n * - The controllers attached to an element are accessible via the\n *   `element.controllers` array\n *\n * The controller maintains internal state in `this.state`, which can only be\n * updated by calling (`this.setState(changes)`). Whenever the internal state of\n * the controller changes, `this.update()` is called to sync the DOM with this\n * state.\n */\nclass Controller {\n  /**\n   * Initialize the controller.\n   *\n   * @param {Element} element - The DOM Element to upgrade\n   * @param {ControllerOptions} [options] - Configuration options for the\n   *        controller. Subclasses extend this interface to provide config\n   *        specific to that type of controller.\n   */\n  constructor(element, options = {}) {\n\n    if (!element) {\n      throw new Error('Controllers require an element passed to the constructor');\n    } else if (!element.controllers) {\n      element.controllers = [this];\n    } else {\n      element.controllers.push(this);\n    }\n\n    this.state = {};\n    this.element = element;\n    this.options = options;\n    this.refs = findRefs(element);\n  }\n\n  /**\n   * Set the state of the controller.\n   *\n   * This will merge `changes` into the current state and call the `update()`\n   * method provided by the subclass to update the DOM to match the current state.\n   */\n  setState(changes) {\n    const prevState = this.state;\n    this.state = Object.freeze(Object.assign({}, this.state, changes));\n    this.update(this.state, prevState);\n  }\n\n  /**\n   * Calls update() with the current state.\n   *\n   * This is useful for controllers where the state is available in the DOM\n   * itself, so doesn't need to be maintained internally.\n   */\n  forceUpdate() {\n    this.update(this.state, this.state);\n  }\n\n  /**\n   * Listen for events dispatched to the root element passed to the controller.\n   *\n   * This a convenience wrapper around `this.element.addEventListener`.\n   */\n  on(event, listener, useCapture) {\n    this.element.addEventListener(event, listener, useCapture);\n  }\n\n  /**\n   * Handler which is invoked when the controller's element is about to be\n   * removed.\n   *\n   * This can be used to clean up subscriptions, timeouts etc.\n   */\n  beforeRemove() {}\n}\n\nmodule.exports = Controller;\n",
    "'use strict';\n\n/**\n * This module configures Raven for reporting crashes\n * to Sentry.\n *\n * Logging requires the Sentry DSN and Hypothesis\n * version to be provided via the app's settings object.\n */\n\nrequire('core-js/fn/object/assign');\n\nconst Raven = require('raven-js');\n\nfunction init(config) {\n  Raven.config(config.dsn, {\n    release: config.release,\n  }).install();\n\n  if (config.userid) {\n    Raven.setUserContext({id: config.userid});\n  }\n\n  installUnhandledPromiseErrorHandler();\n}\n\n/**\n * Report an error to Sentry.\n *\n * @param {Error} error - An error object describing what went wrong\n * @param {string} when - A string describing the context in which\n *                        the error occurred.\n * @param {Object} [context] - A JSON-serializable object containing additional\n *                             information which may be useful when\n *                             investigating the error.\n */\nfunction report(error, when, context) {\n  if (!(error instanceof Error)) {\n    // If the passed object is not an Error, raven-js\n    // will serialize it using toString() which produces unhelpful results\n    // for objects that do not provide their own toString() implementations.\n    //\n    // If the error is a plain object or non-Error subclass with a message\n    // property, such as errors returned by chrome.extension.lastError,\n    // use that instead.\n    if (typeof error === 'object' && error.message) {\n      error = error.message;\n    }\n  }\n\n  const extra = Object.assign({ when: when }, context);\n  Raven.captureException(error, { extra: extra });\n}\n\n/**\n * Installs a handler to catch unhandled rejected promises.\n *\n * For this to work, the browser or the Promise polyfill must support\n * the unhandled promise rejection event (Chrome >= 49). On other browsers,\n * the rejections will simply go unnoticed. Therefore, app code _should_\n * always provide a .catch() handler on the top-most promise chain.\n *\n * See https://github.com/getsentry/raven-js/issues/424\n * and https://www.chromestatus.com/feature/4805872211460096\n *\n * It is possible that future versions of Raven JS may handle these events\n * automatically, in which case this code can simply be removed.\n */\nfunction installUnhandledPromiseErrorHandler() {\n  window.addEventListener('unhandledrejection', (event) => {\n    if (event.reason) {\n      report(event.reason, 'Unhandled Promise rejection');\n    }\n  });\n}\n\nmodule.exports = {\n  init: init,\n  report: report,\n};\n",
    "'use strict';\n\nrequire('core-js/fn/object/assign');\n\n/**\n * Return application configuration information from the host page.\n *\n * Exposes shared application settings, read from script tags with the\n * class `settingsClass` which contain JSON content.\n *\n * If there are multiple such tags, the configuration from each is merged.\n *\n * @param {Document|Element} document - The root element to search for\n *                                      <script> settings tags.\n * @param {string} settingsClass - The class name to match on <script> tags.\n */\nfunction settings(document, settingsClass) {\n  if (!settingsClass) {\n    settingsClass = 'js-hypothesis-settings';\n  }\n  const settingsElements =\n    document.querySelectorAll('script.' + settingsClass);\n\n  const config = {};\n  for (let i=0; i < settingsElements.length; i++) {\n    Object.assign(config, JSON.parse(settingsElements[i].textContent));\n  }\n  return config;\n}\n\nmodule.exports = settings;\n",
    "'use strict';\n\n/**\n * Mark an element as having been upgraded.\n */\nfunction markReady(element) {\n  const HIDE_CLASS = 'is-hidden-when-loading';\n  const hideOnLoad = Array.from(element.querySelectorAll('.' + HIDE_CLASS));\n  hideOnLoad.forEach((el) => {\n    el.classList.remove(HIDE_CLASS);\n  });\n  element.classList.remove(HIDE_CLASS);\n}\n\n// List of all elements which have had upgrades applied\nlet upgradedElements = [];\n\n/**\n * Remove all of the controllers for elements under `root`.\n *\n * This clears the `controllers` list for all elements under `root` and notifies\n * the controllers that their root element is about to be removed from the\n * document.\n */\nfunction removeControllers(root) {\n  upgradedElements = upgradedElements.filter((el) => {\n    if (root.contains(el)) {\n      el.controllers.forEach(ctrl => ctrl.beforeRemove());\n      el.controllers = [];\n      return false;\n    } else {\n      return true;\n    }\n  });\n}\n\n/**\n * Upgrade elements on the page with additional functionality\n *\n * Controllers attached to upgraded elements are accessible via the `controllers`\n * property on the element.\n *\n * @param {Element} root - The root element to search for matching elements\n * @param {Object} controllers - Object mapping selectors to controller classes.\n *        For each element matching a given selector, an instance of the\n *        controller class will be constructed and passed the element in\n *        order to upgrade it.\n */\nfunction upgradeElements(root, controllers) {\n  // A helper which replaces the content (including the root element) of\n  // an upgraded element with new markup and re-applies element upgrades to\n  // the new root element\n  function reload(element, html) {\n    removeControllers(element);\n\n    if (typeof html !== 'string') {\n      throw new Error('Replacement markup must be a string');\n    }\n    const container = document.createElement('div');\n    container.innerHTML = html;\n    upgradeElements(container, controllers);\n\n    const newElement = container.children[0];\n    element.parentElement.replaceChild(newElement, element);\n    return newElement;\n  }\n\n  Object.keys(controllers).forEach((selector) => {\n    const elements = Array.from(root.querySelectorAll(selector));\n    elements.forEach((el) => {\n      const ControllerClass = controllers[selector];\n      try {\n        new ControllerClass(el, {\n          reload: reload.bind(null, el),\n        });\n        upgradedElements.push(el);\n        markReady(el);\n      } catch (err) {\n        console.error('Failed to upgrade element %s with controller', el, ControllerClass, ':', err.toString());\n\n        // Re-raise error so that Raven can capture and report it\n        throw err;\n      }\n    });\n  });\n}\n\nmodule.exports = upgradeElements;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\nconst setElementState = require('../util/dom').setElementState;\nconst updateHelper = require('../util/update-helpers.js');\n\nconst ENTER = 13;\nconst UP = 38;\nconst DOWN = 40;\n\n/**\n * Controller for adding autosuggest control to a piece of the page\n */\nclass AutosuggestDropdownController extends Controller {\n\n  /*\n   * @typedef {Object} ConfigOptions\n   * @property {Function} renderListItem - called with every item in the list\n   *   after the listFilter function is called. The return value will be the final\n   *   html that is set in the list item DOM.\n   * @property {Function} listFilter - called at initialization, focus of input,\n   *   and input changes made by user. The function will receieve the full list\n   *   and the current value of the input. This is meant to be an pure function\n   *   that will return a filtered list based on the consumer's domain needs.\n   * @property {Function} onSelect - called once the user has made a selection of an\n   *   item in the autosuggest. It will receive the item selected as the only argument.\n   * @property {Object} [classNames] - this is the enumerated list of class name\n   *   overrides for consumers to customize the UI.\n   *   Possible values: { container, list, item, activeItem, header }\n   * @property {String} [header] - value of the header label at top of suggestions\n   */\n\n  /**\n   * @param {HTMLInputElement} inputElement that we are responding to in order to provide\n   *    suggestions. Note, we will add the suggestion container as a sibling to this\n   *    element.\n   * @param {ConfigOptions} configOptions are used to set the initial set of items and the header\n   *    as well as providing the hooks for updates and callbacks\n   *\n   */\n  constructor(inputElement, configOptions) {\n\n    super(inputElement, configOptions);\n\n    if (!configOptions.renderListItem) {\n      throw new Error('Missing renderListItem callback in AutosuggestDropdownController constructor');\n    }\n\n    if (!configOptions.listFilter) {\n      throw new Error('Missing listFilter function in AutosuggestDropdownController constructor');\n    }\n\n    if (!configOptions.onSelect) {\n      throw new Error('Missing onSelect callback in AutosuggestDropdownController constructor');\n    }\n\n    // set up our element class attribute enum values\n    // Note, we currently are not doing anything with the default\n    // classes, but we have them if we wanted to give something for a default\n    // styling.\n    if (configOptions.classNames) {\n      this.options.classNames.container = configOptions.classNames.container || 'autosuggest__container';\n      this.options.classNames.list = configOptions.classNames.list || 'autosuggest__list';\n      this.options.classNames.item = configOptions.classNames.item || 'autosuggest__list-item';\n      this.options.classNames.activeItem = configOptions.classNames.activeItem || 'autosuggest__list-item--active';\n      this.options.classNames.header = configOptions.classNames.header || 'autosuggest__header';\n    }\n\n    // renaming simply to make it more obvious what\n    // the element is in other contexts of the controller\n    this._input = this.element;\n\n    // initial state values\n    this.setState({\n      visible: false,\n      header: configOptions.header || '',\n\n      // working list that are displayed to use\n      list: [],\n\n      // rootList is the original set that the filter\n      // will receive to determine what should be shown\n      rootList: [],\n    });\n\n    this._setList(configOptions.list);\n\n\n    // Public API\n    this.setHeader = this._setHeader;\n  }\n\n  update(newState, prevState) {\n\n    // if our prev state is empty then\n    // we assume that this is the first update/render call\n    if (!('visible' in prevState)) {\n\n      // create the elements that make up the component\n      this._renderContentContainers();\n      this._addTopLevelEventListeners();\n    }\n\n    if (newState.visible !== prevState.visible) {\n      // updates the dom to change the class which actually updates visibilty\n      setElementState(this._suggestionContainer, { open: newState.visible});\n    }\n\n    if (newState.header !== prevState.header) {\n      this._header.innerHTML = newState.header;\n    }\n\n    const listChanged = updateHelper.listIsDifferent(newState.list, prevState.list);\n\n    if (listChanged) {\n      this._renderListItems();\n    }\n\n    // list change detection is needed to persist the\n    // currently active elements over to the new list\n    if (newState.activeId !== prevState.activeId || listChanged) {\n\n      const currentActive = this._getActiveListItemElement();\n\n      if (prevState.activeId && currentActive) {\n        currentActive.classList.remove(this.options.classNames.activeItem);\n      }\n\n      if (newState.activeId && newState.list.find(item => item.__suggestionId === newState.activeId)) {\n        this._listContainer\n          .querySelector(`[data-suggestion-id=\"${newState.activeId}\"]`)\n          .classList.add(this.options.classNames.activeItem);\n      }\n    }\n  }\n\n  /**\n   * sets what would be the top header html\n   *  to give context of what the suggestions are for\n   *\n   * @param  {string} header Html to place in header. You can pass plain text\n   *  as well.\n   */\n  _setHeader(header) {\n    this.setState({\n      header,\n    });\n  }\n\n  /**\n   * update the current list\n   *\n   * @param  {Array} list The new list.\n   */\n  _setList(list) {\n\n    if (!Array.isArray(list)) {\n      throw new TypeError('setList requires an array first argument');\n    }\n\n    this.setState({\n      rootList: list.map((item) => {\n        return Object.assign({}, item, {\n          // create an id that lets us direction map\n          // selection to arbitrary item in list.\n          // This allows lists to pass more than just the required\n          // `name` property to know more about what the list item is\n          __suggestionId: Math.random().toString(36).substr(2, 5),\n        });\n      }),\n    });\n\n    this._filterListFromInput();\n  }\n\n  /**\n   * we will run the consumer's filter function\n   *  that is expected to be a pure function that will receive the\n   *  root list (the initial list or list made with setList) and\n   *  the input's current value. that function will return the array items,\n   *  filtered and sorted, that will be set the new working list state and\n   *  be rerendered.\n   */\n  _filterListFromInput() {\n    this.setState({\n      list: this.options.listFilter(this.state.rootList, this._input.value) || [],\n    });\n  }\n\n  /**\n   * hit the consumers filter function to determine\n   *   if we still have list items that need to be shown to the user.\n   */\n  _filterAndToggleVisibility() {\n    this._filterListFromInput();\n\n    this._toggleSuggestionsVisibility(/*show*/ this.state.list.length > 0);\n  }\n\n  /**\n   * lookup the active element, get item from\n   *  object from list that was passed in, and invoke the onSelect callback.\n   *  This is process to actually make a selection\n   */\n  _selectCurrentActiveItem() {\n\n    const currentActive = this._getActiveListItemElement();\n    const suggestionId = currentActive && currentActive.getAttribute('data-suggestion-id');\n    const selection = this.state.list.filter((item) => { return item.__suggestionId === suggestionId;})[0];\n\n    if (selection) {\n      this.options.onSelect(selection);\n      this._filterAndToggleVisibility();\n      this.setState({\n        activeId: null,\n      });\n    }\n  }\n\n  /**\n   * update the list item dom elements with\n   *  their \"active\" state when the user is hovering.\n   *\n   * @param  {bool} hovering are we hovering on the current element\n   * @param  {Event} event    event used to pull the list item being targeted\n   */\n  _toggleItemHoverState(hovering, event) {\n\n    const currentActive = this._getActiveListItemElement();\n    const target = event.currentTarget;\n\n    if ( hovering && currentActive && currentActive.contains(target)) {\n      return;\n    }\n\n    this.setState({\n      activeId: hovering ? target.getAttribute('data-suggestion-id') : null,\n    });\n  }\n\n  /**\n   * this function piggy backs on the setElementState\n   *  style of defining element state in its class. Used in combination with the\n   *  this.options.classNames.container the consumer has easy access to what the visibility state\n   *  of the container is.\n   *\n   * @param  {bool} show should we update the state to be visible or not\n   */\n  _toggleSuggestionsVisibility(show) {\n\n    // keeps the internal state synced with visibility\n    this.setState({\n      visible: !!show,\n    });\n  }\n\n  /**\n   * @returns {HTMLElement}  the active list item element\n   */\n  _getActiveListItemElement() {\n    return this._listContainer.querySelector('.' + this.options.classNames.activeItem);\n  }\n\n  /**\n   * navigate the list, toggling the active item,\n   *  based on the users arrow directions\n   *\n   * @param  {bool} down is the user navigating down the list?\n   */\n  _keyboardSelectionChange(down) {\n\n    const currentActive = this._getActiveListItemElement();\n    let nextActive;\n\n    // we have a starting point, navigate on siblings of current\n    if (currentActive) {\n\n      if (down) {\n        nextActive = currentActive.nextSibling;\n      } else {\n        nextActive = currentActive.previousSibling;\n      }\n\n    // we have no starting point, let's navigate based on\n    // the directional expectation of what the first item would be\n    } else if (down) {\n      nextActive = this._listContainer.firstChild;\n    } else {\n      nextActive = this._listContainer.lastChild;\n    }\n\n    this.setState({\n      activeId: nextActive ?  nextActive.getAttribute('data-suggestion-id') : null,\n    });\n  }\n\n  /**\n   * build the DOM structure that makes up\n   *  the suggestion box and content containers.\n   */\n  _renderContentContainers() {\n\n    // container of all suggestion elements\n    this._suggestionContainer = document.createElement('div');\n    this._suggestionContainer.classList.add(this.options.classNames.container);\n\n\n    // child elements that will be populated by consumer\n    this._header = document.createElement('h4');\n    this._header.classList.add(this.options.classNames.header);\n    this._setHeader(this.state.header);\n    this._suggestionContainer.appendChild(this._header);\n\n    this._listContainer = document.createElement('ul');\n    this._listContainer.setAttribute('role', 'listbox');\n    this._listContainer.classList.add(this.options.classNames.list);\n    this._suggestionContainer.appendChild(this._listContainer);\n\n    // put the suggestions adjacent to the input element\n    // firefox does not support insertAdjacentElement\n    if (HTMLElement.prototype.insertAdjacentElement) {\n      this._input.insertAdjacentElement('afterend', this._suggestionContainer);\n    } else {\n      this._input.parentNode.insertBefore(this._suggestionContainer, this._input.nextSibling);\n    }\n  }\n\n  /**\n   * updates the content of the list container and builds\n   *  the new set of list items.\n   */\n  _renderListItems() {\n    // Create the new list items, render their contents\n    // and update the dom with the new elements.\n\n    this._listContainer.innerHTML = '';\n\n    this.state.list.forEach((listItem) => {\n      const li = document.createElement('li');\n      li.setAttribute('role', 'option');\n      li.classList.add(this.options.classNames.item);\n      li.setAttribute('data-suggestion-id', listItem.__suggestionId);\n\n      // this should use some sort of event delegation if\n      // we find we want to expand this to lists with *a lot* of items in it\n      // But for now this binding has no real affect on small list perf\n      li.addEventListener('mouseenter', this._toggleItemHoverState.bind(this, /*hovering*/true));\n      li.addEventListener('mouseleave', this._toggleItemHoverState.bind(this, /*hovering*/false));\n      li.addEventListener('mousedown', (event) => {\n        // for situations like mobile, hovering might not be\n        // the first event to set the active state for an element\n        // so we will mimic that on mouse down and let selection happen\n        // at the top level event\n        this._toggleItemHoverState(/*hovering*/true, event);\n        this._selectCurrentActiveItem();\n      });\n\n      li.innerHTML = this.options.renderListItem(listItem);\n\n      this._listContainer.appendChild(li);\n    });\n  }\n\n  /**\n   * The events that can be set on a \"global\" or top\n   *  level scope, we are going to set them here.\n   */\n  _addTopLevelEventListeners() {\n\n    // we need to use mousedown instead of click\n    // so we can beat the blur event which can\n    // change visibility/target of the active event\n    document.addEventListener('mousedown', (event) => {\n\n      const target = event.target;\n\n      // when clicking the input itself or if we are\n      // or a global click was made while we were not visible\n      // do nothing\n      if (!this.state.visible || target === this._input) {\n        return;\n      }\n\n      // see if inside interaction areas\n      if (this._suggestionContainer.contains(target)) {\n\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      // not in an interaction area, so we assume they\n      // want it to go away.\n      this._toggleSuggestionsVisibility(/*show*/ false);\n    });\n\n    // Note, keydown needed here to properly prevent the default\n    // nature of navigating keystrokes - like DOWN ARROW at the end of an\n    // input takes the cursor to the beginning of the input value.\n    this._input.addEventListener('keydown', (event) => {\n\n      const key = event.keyCode;\n\n      // only consume the ENTER event if\n      // we have an active item\n      if (key === ENTER && !this._getActiveListItemElement()) {\n        return;\n      }\n\n      // these keys are going to be consumed and not propagated\n      if ([ENTER, UP, DOWN].indexOf(key) > -1) {\n\n        if (key === ENTER) {\n          this._selectCurrentActiveItem();\n        } else {\n          this._keyboardSelectionChange(/*down*/key === DOWN);\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n        event.stopImmediatePropagation();\n      }\n\n      // capture phase needed to beat any other listener that could\n      // stop propagation after inspecting input value\n    }, /*useCapturePhase*/ true);\n\n    this._input.addEventListener('keyup', (event) => {\n\n      if ([ENTER, UP, DOWN].indexOf(event.keyCode) === -1) {\n        this._filterAndToggleVisibility();\n      }\n\n      // capture phase needed to beat any other listener that could\n      // stop propagation after inspecting input value\n    }, /*useCapturePhase*/ true);\n\n    this._input.addEventListener('focus', () => {\n      this._filterAndToggleVisibility();\n    });\n\n    this._input.addEventListener('blur', () => {\n      this._toggleSuggestionsVisibility(/*show*/false);\n    });\n\n  }\n}\n\nmodule.exports = AutosuggestDropdownController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\nconst { setElementState } = require('../util/dom');\n\nclass CharacterLimitController extends Controller {\n  constructor(element) {\n    super(element);\n\n    this.refs.characterLimitInput.addEventListener('input', () => {\n      this.forceUpdate();\n    });\n    this.forceUpdate();\n  }\n\n  update() {\n    const input = this.refs.characterLimitInput;\n    const maxlength = parseInt(input.dataset.maxlength);\n    const counter = this.refs.characterLimitCounter;\n    counter.textContent = input.value.length + '/' + maxlength;\n    setElementState(counter, {tooLong: input.value.length > maxlength});\n    setElementState(this.refs.characterLimitCounter, {ready: true});\n  }\n}\n\nmodule.exports = CharacterLimitController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\n\n/* Turn a normal submit element into one that shows a confirm dialog.\n *\n * The element's form will only be submitted if the user answers the\n * confirmation dialog positively.\n *\n */\nclass ConfirmSubmitController extends Controller {\n  constructor(element, options) {\n    super(element);\n\n    const window_ = options.window || window;\n\n    element.addEventListener('click', (event) => {\n      if (!window_.confirm(element.dataset.confirmMessage)) {\n        event.preventDefault();\n        event.stopPropagation();\n        event.stopImmediatePropagation();\n        return;\n      }\n    }, /*capture*/ true);\n  }\n}\n\nmodule.exports = ConfirmSubmitController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\n\nfunction isProbablyMobileSafari(userAgent) {\n  return /\\bMobile\\b/.test(userAgent) && /\\bSafari\\b/.test(userAgent);\n}\n\nclass CopyButtonController extends Controller {\n  constructor(element, options = {}) {\n    super(element, options);\n\n    const userAgent = options.userAgent || navigator.userAgent;\n\n    // Make the input field read-only to avoid the user accidentally modifying\n    // the link before copying it.\n    //\n    // An exception is made for Mobile Safari because selecting the contents of\n    // a read-only input field is hard in that browser.\n    this.refs.input.readOnly = !isProbablyMobileSafari(userAgent);\n\n    this.refs.button.onclick = () => {\n\n      // Method for selecting <input> text taken from 'select' package.\n      // See https://github.com/zenorocha/select/issues/1 and\n      // http://stackoverflow.com/questions/3272089\n      this.refs.input.focus();\n      this.refs.input.setSelectionRange(0, this.refs.input.value.length);\n\n      const notificationText = document.execCommand('copy') ?\n        'Link copied to clipboard!' :\n        'Copying link failed';\n\n      const NOTIFICATION_TEXT_TIMEOUT = 1000;\n      const originalValue = this.refs.input.value;\n      this.refs.input.value = notificationText;\n      window.setTimeout(\n        () => {\n          this.refs.input.value = originalValue;\n          // Copying can leave the <input> focused but its value text not\n          // selected, and since it's already focused clicking on it to focus\n          // it doesn't trigger the auto select all on focus. So we unfocus it.\n          this.refs.input.blur();\n        },\n        NOTIFICATION_TEXT_TIMEOUT);\n    };\n  }\n}\n\nmodule.exports = CopyButtonController;\n",
    "'use strict';\n\nfunction CreateGroupFormController(element) {\n  // Create Group form handling\n  const self = this;\n  this._submitBtn = element.querySelector('.js-create-group-create-btn');\n  this._groupNameInput = element.querySelector('.js-group-name-input');\n  this._infoLink = element.querySelector('.js-group-info-link');\n  this._infoText = element.querySelector('.js-group-info-text');\n\n  function groupNameChanged() {\n    self._submitBtn.disabled = self._groupNameInput.value.trim().length === 0;\n  }\n\n  self._groupNameInput.addEventListener('input', groupNameChanged);\n  groupNameChanged();\n\n  this._infoLink.addEventListener('click', (event) => {\n    event.preventDefault();\n    self._infoLink.classList.add('is-hidden');\n    self._infoText.classList.remove('is-hidden');\n  });\n}\n\nmodule.exports = CreateGroupFormController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\nconst setElementState = require('../util/dom').setElementState;\n\n/**\n * Controller for dropdown menus.\n */\nclass DropdownMenuController extends Controller {\n  constructor(element) {\n    super(element);\n\n    const toggleEl = this.refs.dropdownMenuToggle;\n\n    const handleClickOutside = (event) => {\n      if (!this.refs.dropdownMenuContent.contains(event.target)) {\n        // When clicking outside the menu on the toggle element, stop the event\n        // so that it does not re-trigger the menu\n        if (toggleEl.contains(event.target)) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n\n        this.setState({open: false});\n\n        element.ownerDocument.removeEventListener('click', handleClickOutside,\n          true /* capture */);\n      }\n    };\n\n    toggleEl.addEventListener('click', (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n\n      this.setState({open: true});\n\n      element.ownerDocument.addEventListener('click', handleClickOutside,\n        true /* capture */);\n    });\n  }\n\n  update(state) {\n    setElementState(this.refs.dropdownMenuContent, {open: state.open});\n    this.refs.dropdownMenuToggle.setAttribute('aria-expanded', state.open.toString());\n  }\n}\n\nmodule.exports = DropdownMenuController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\nconst { findRefs, setElementState } = require('../util/dom');\nconst modalFocus = require('../util/modal-focus');\nconst submitForm = require('../util/submit-form');\n\nfunction shouldAutosubmit(type) {\n  const autosubmitTypes = ['checkbox', 'radio'];\n  return autosubmitTypes.indexOf(type) !== -1;\n}\n\n/**\n * Return true if a form field should be hidden until the user starts editing\n * the form.\n *\n * @param {Element} el - The container for an individual form field, which may\n *        have a \"data-hide-until-active\" attribute.\n */\nfunction isHiddenField(el) {\n  return el.dataset.hideUntilActive;\n}\n\n/**\n * @typedef {Object} Field\n * @property {Element} container - The container element for an input field\n * @property {HTMLInputElement} input - The <input> element for an input field\n * @property {HTMLLabelElement} label - The <label> element for a field\n */\n\n/**\n * A controller which adds inline editing functionality to forms.\n *\n * When forms have inline editing enabled, individual fields can be edited and\n * changes can be saved without a full page reload.\n *\n * Instead when the user focuses a field, Save/Cancel buttons are shown beneath\n * the field and everything else on the page is dimmed. When the user clicks 'Save'\n * the form is submitted to the server via a `fetch()` request and the HTML of\n * the form is updated with the result, which may be a successfully updated form\n * or a re-rendered version of the form with validation errors indicated.\n */\nclass FormController extends Controller {\n  constructor(element, options) {\n    super(element, options);\n\n    setElementState(this.refs.cancelBtn, {hidden: false});\n    this.refs.cancelBtn.addEventListener('click', (event) => {\n      event.preventDefault();\n      this.cancel();\n    });\n\n    // List of groups of controls that constitute each form field\n    this._fields = Array.from(element.querySelectorAll('.js-form-input'))\n      .map((el) => {\n        const parts = findRefs(el);\n        return {\n          container: el,\n          input: parts.formInput,\n          label: parts.label,\n        };\n      });\n\n    this.on('focus', (event) => {\n      const field = this._fields.find(field => field.input === event.target);\n      if (!field) {\n        return;\n      }\n\n      this.setState({\n        editingFields: this._editSet(field),\n        focusedField: field,\n      });\n    }, true /* capture - focus does not bubble */);\n\n    this.on('change', (event) => {\n      if (shouldAutosubmit(event.target.type)) {\n        this.submit();\n      }\n    });\n\n    this.on('input', (event) => {\n      // Some but not all browsers deliver an `input` event for radio/checkbox\n      // inputs. Since we auto-submit when such inputs change, don't mark the\n      // field as dirty.\n      if (shouldAutosubmit(event.target.type)) {\n        return;\n      }\n      this.setState({dirty: true});\n    });\n\n    this.on('keydown', (event) => {\n      event.stopPropagation();\n      if (event.key === 'Escape') {\n        this.cancel();\n      }\n    });\n\n    // Ignore clicks outside of the active field when editing\n    this.refs.formBackdrop.addEventListener('mousedown', (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n    });\n\n    // Setup AJAX handling for forms\n    this.on('submit', (event) => {\n      event.preventDefault();\n      this.submit();\n    });\n\n    this.setState({\n      // True if the user has made changes to the field they are currently\n      // editing\n      dirty: false,\n      // The set of fields currently being edited\n      editingFields: [],\n      // The field within the `editingFields` set that was last focused\n      focusedField: null,\n      // Markup for the original form. Used to revert the form to its original\n      // state when the user cancels editing\n      originalForm: this.element.outerHTML,\n      // Flag that indicates a save is currently in progress\n      saving: false,\n      // Error that occurred while submitting the form\n      submitError: '',\n    });\n  }\n\n  update(state, prevState) {\n    // In forms that support editing a single field at a time, show the\n    // Save/Cancel buttons below the field that we are currently editing.\n    //\n    // In the current forms that support editing multiple fields at once,\n    // we always display the Save/Cancel buttons in their default position\n    if (state.editingFields.length === 1) {\n      state.editingFields[0].container.parentElement.insertBefore(\n        this.refs.formActions,\n        state.editingFields[0].container.nextSibling\n      );\n    }\n\n    if (state.editingFields.length > 0 &&\n        state.editingFields !== prevState.editingFields) {\n      this._trapFocus();\n    }\n\n    const isEditing = state.editingFields.length > 0;\n    setElementState(this.element, {editing: isEditing});\n    setElementState(this.refs.formActions, {\n      hidden: !isEditing || shouldAutosubmit(state.editingFields[0].input.type),\n      saving: state.saving,\n    });\n\n    setElementState(this.refs.formSubmitError, {\n      visible: state.submitError.length > 0,\n    });\n    this.refs.formSubmitErrorMessage.textContent = state.submitError;\n\n    this._updateFields(state);\n  }\n\n  /**\n   * Update the appearance of individual form fields to match the current state\n   * of the form.\n   *\n   * @param {Object} state - The internal state of the form\n   */\n  _updateFields(state) {\n    this._fields.forEach((field) => {\n      setElementState(field.container, {\n        editing: state.editingFields.includes(field),\n        focused: field === state.focusedField,\n        hidden: isHiddenField(field.container) &&\n                !state.editingFields.includes(field),\n      });\n\n      // Update labels\n      const activeLabel = field.container.dataset.activeLabel;\n      const inactiveLabel = field.container.dataset.inactiveLabel;\n      const isEditing = state.editingFields.includes(field);\n\n      if (activeLabel && inactiveLabel) {\n        field.label.textContent = isEditing ? activeLabel : inactiveLabel;\n      }\n\n      // Update placeholder\n      //\n      // The UA may or may not autofill password fields.\n      // Set a dummy password as a placeholder when the field is not being edited\n      // so that it appears non-empty if the UA doesn't autofill it.\n      if (field.input.type === 'password') {\n        field.input.setAttribute('placeholder', !isEditing ? '••••••••' : '');\n      }\n    });\n  }\n\n  beforeRemove() {\n    if (this._releaseFocus) {\n      this._releaseFocus();\n    }\n  }\n\n  /**\n   * Perform an AJAX submission of the form and replace it with the rendered\n   * result.\n   */\n  submit() {\n    const originalForm = this.state.originalForm;\n\n    let activeInputId;\n    if (this.state.editingFields.length > 0) {\n      activeInputId = this.state.editingFields[0].input.id;\n    }\n\n    this.setState({saving: true});\n\n    return submitForm(this.element).then((response) => {\n      this.options.reload(response.form);\n    }).catch((err) => {\n      if (err.form) {\n        // The server processed the request but rejected the submission.\n        // Display the returned form which will contain any validation error\n        // messages.\n        const newFormEl = this.options.reload(err.form);\n        const newFormCtrl = newFormEl.controllers.find(ctrl =>\n          ctrl instanceof FormController);\n\n        // Resume editing the field where validation failed\n        const newInput = document.getElementById(activeInputId);\n        if (newInput) {\n          newInput.focus();\n        }\n\n        newFormCtrl.setState({\n          // Mark the field in the replaced form as dirty since it has unsaved\n          // changes\n          dirty: newInput !== null,\n          // If editing is canceled, revert back to the _original_ version of\n          // the form, not the version with validation errors from the server.\n          originalForm,\n        });\n      } else {\n        // If there was an error processing the request or the server could\n        // not be reached, display a helpful error\n        this.setState({\n          submitError: err.reason || 'There was a problem saving changes.',\n          saving: false,\n        });\n      }\n    });\n  }\n\n  /**\n   * Return the set of elements that the user should be able to interact with,\n   * depending upon the field which is currently focused.\n   */\n  _focusGroup() {\n    const fieldContainers = this.state.editingFields.map(field => field.container);\n    if (fieldContainers.length === 0) {\n      return null;\n    }\n\n    return [this.refs.formActions].concat(fieldContainers);\n  }\n\n  /**\n   * Trap focus within the set of form fields currently being edited.\n   */\n  _trapFocus() {\n    this._releaseFocus = modalFocus.trap(this._focusGroup(), (newFocusedElement) => {\n      // Keep focus in the current field when it has unsaved changes,\n      // otherwise let the user focus another field in the form or move focus\n      // outside the form entirely.\n      if (this.state.dirty) {\n        return this.state.editingFields[0].input;\n      }\n\n      // If the user tabs out of the form, clear the editing state\n      if (!this.element.contains(newFocusedElement)) {\n        this.setState({editingFields: []});\n      }\n\n      return null;\n    });\n  }\n\n  /**\n   * Return the set of fields that should be displayed in the editing state\n   * when a given field is selected.\n   *\n   * @param {Field} - The field that was focused\n   * @return {Field[]} - Set of fields that should be active for editing\n   */\n  _editSet(field) {\n    // Currently we have two types of form:\n    // 1. Forms which only edit one field at a time\n    // 2. Forms with hidden fields (eg. the Change Email, Change Password forms)\n    //    which should enable editing all fields when any is focused\n    if (this._fields.some(field => isHiddenField(field.container))) {\n      return this._fields;\n    } else {\n      return [field];\n    }\n  }\n\n  /**\n   * Cancel editing for the currently active field and revert any unsaved\n   * changes.\n   */\n  cancel() {\n    this.options.reload(this.state.originalForm);\n  }\n}\n\nmodule.exports = FormController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\n\nclass FormSelectOnFocusController extends Controller {\n  constructor(element) {\n    super(element);\n\n    // In case the `focus` event has already been fired, select the element\n    if (element === document.activeElement) {\n      element.select();\n    }\n\n    element.addEventListener('focus', (event) => {\n      event.target.select();\n    });\n  }\n}\n\nmodule.exports = FormSelectOnFocusController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\n\nfunction isWordChar(event) {\n  return event.key.match(/^\\w$/) && !event.ctrlKey && !event.altKey &&\n                                    !event.metaKey;\n}\n\n/**\n * Automatically focuses an input field when the user presses a letter, number\n * or backspace if no other element on the page has keyboard focus. The field's\n * focus can also be blurred by pressing Escape.\n *\n * This provides behavior similar to Google.com where the user can \"type\" in the\n * search box even if it is not focused.\n */\nclass InputAutofocusController extends Controller {\n  constructor(element) {\n    super(element);\n\n    this._onKeyDown = (event) => {\n      if (document.activeElement === document.body) {\n        if (isWordChar(event) || event.key === 'Backspace') {\n          element.focus();\n        }\n      } else if (document.activeElement === element && event.key === 'Escape') {\n        element.blur();\n      }\n    };\n\n    document.addEventListener('keydown', this._onKeyDown);\n  }\n\n  beforeRemove() {\n    document.removeEventListener('keydown', this._onKeyDown);\n  }\n}\n\nmodule.exports = InputAutofocusController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\nconst searchTextParser = require('../util/search-text-parser');\nconst { setElementState } = require('../util/dom');\n\n/**\n * A lozenge representing a single search term.\n *\n * A lozenge consists of two parts - the lozenge content and the 'x' button\n * which when clicked calls the `deleteCallback` handler passed in the\n * controller's options.\n *\n * const lozenge = new Lozenge(element, {\n *   content,\n *   deleteCallback,\n * });\n */\nclass LozengeController extends Controller {\n\n  constructor(element, options) {\n    super(element, options);\n\n    // Work-around for HTMLFormElement#submit() failing in Firefox if a submit\n    // button removes itself during click event handler.\n    //\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=494755#c4 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=586329\n    this.refs.deleteButton.type = 'button';\n\n    let facetName = '';\n    let facetValue = options.content;\n\n    if (searchTextParser.hasKnownNamedQueryTerm(options.content)) {\n      const queryTerm = searchTextParser.getLozengeFacetNameAndValue(options.content);\n      facetName = queryTerm.facetName;\n      facetValue = queryTerm.facetValue;\n    }\n\n    element.classList.add('js-lozenge');\n\n    this.refs.deleteButton.addEventListener('click', (event) => {\n      event.preventDefault();\n      options.deleteCallback();\n    });\n\n    this.setState({\n      facetName,\n      facetValue,\n      disabled: false,\n    });\n  }\n\n  update(state) {\n    setElementState(this.element, {disabled: state.disabled});\n    let facetName = state.facetName;\n    if (facetName) {\n      facetName += ':';\n    }\n    this.refs.facetName.textContent = facetName;\n    this.refs.facetValue.textContent = state.facetValue;\n  }\n\n  inputValue() {\n    if (this.state.facetName) {\n      return this.state.facetName + ':' + this.state.facetValue;\n    } else {\n      return this.state.facetValue;\n    }\n  }\n}\n\nmodule.exports = LozengeController;\n",
    "'use strict';\n\nconst escapeHtml = require('escape-html');\n\nconst Controller = require('../base/controller');\nconst LozengeController = require('./lozenge-controller');\nconst AutosuggestDropdownController = require('./autosuggest-dropdown-controller');\nconst SearchTextParser = require('../util/search-text-parser');\nconst { cloneTemplate } = require('../util/dom');\nconst stringUtil = require('../util/string');\n\n\nconst FACET_TYPE = 'FACET';\nconst TAG_TYPE = 'TAG';\nconst GROUP_TYPE = 'GROUP';\nconst MAX_SUGGESTIONS = 5;\n\n\n/**\n * Normalize a string for use in comparisons of user input with a suggestion.\n * This causes differences in unicode composition and combining characters/accents to be ignored.\n */\nconst normalizeStr = function(str) {\n  return stringUtil.fold(stringUtil.normalize(str));\n};\n\n/**\n * Controller for the search bar.\n */\nclass SearchBarController extends Controller {\n  constructor(element, options = {}) {\n    super(element, options);\n\n    if (!options.lozengeTemplate) {\n      options.lozengeTemplate = document.querySelector('#lozenge-template');\n    }\n\n    this._input = this.refs.searchBarInput;\n    this._lozengeContainer = this.refs.searchBarLozenges;\n\n    /**\n     * the suggestionsMap pulls in the available lists - either\n     *  static or dynamic living in the dom - into one mapping\n     *  lists of all suggestion values.\n     */\n    this._suggestionsMap = (() => {\n\n      const explanationList = [\n        {\n          matchOn: 'user',\n          title: 'user:',\n          explanation: 'search by username',\n        },\n        {\n          matchOn: 'tag',\n          title: 'tag:',\n          explanation: 'search for annotations with a tag',\n        },\n        {\n          matchOn: 'url',\n          title: 'url:',\n          explanation: 'see all annotations on a page',\n        },\n        {\n          matchOn: 'group',\n          title: 'group:',\n          explanation: 'show annotations created in a group you are a member of',\n        },\n      ].map((item) => { return Object.assign(item, { type: FACET_TYPE}); });\n\n      // tagSuggestions are made available by the scoped template data.\n      // see search.html.jinja2 for definition\n      const tagSuggestionJSON = document.querySelector('.js-tag-suggestions');\n      let tagSuggestions = [];\n\n      if (tagSuggestionJSON) {\n        try {\n          tagSuggestions = JSON.parse(tagSuggestionJSON.innerHTML.trim());\n        } catch (e) {\n          console.error('Could not parse .js-tag-suggestions JSON content', e);\n        }\n      }\n\n      const tagsList = ((tagSuggestions) || []).map((item) => {\n        return Object.assign(item, {\n          type: TAG_TYPE,\n          title: item.tag, // make safe\n          matchOn: normalizeStr(item.tag),\n          usageCount: item.count || 0,\n        });\n      });\n\n      // groupSuggestions are made available by the scoped template data.\n      // see search.html.jinja2 for definition\n      const groupSuggestionJSON = document.querySelector('.js-group-suggestions');\n      let groupSuggestions = [];\n\n      if (groupSuggestionJSON) {\n        try {\n          groupSuggestions = JSON.parse(groupSuggestionJSON.innerHTML.trim());\n        } catch (e) {\n          console.error('Could not parse .js-group-suggestions JSON content', e);\n        }\n      }\n\n      const groupsList = ((groupSuggestions) || []).map((item) => {\n        return Object.assign(item, {\n          type: GROUP_TYPE,\n          title: item.name, // make safe\n          matchOn: normalizeStr(item.name),\n          pubid: item.pubid,\n          name: item.name,\n        });\n      });\n\n      return explanationList.concat(tagsList, groupsList);\n    })();\n\n    const getTrimmedInputValue = () => {\n      return this._input.value.trim();\n    };\n\n\n    /**\n     * given a lozenge set for a group, like \"group:value\", match the value\n     *  against our group suggestions list to find a match on either pubid\n     *  or the group name. The result will be an object to identify what\n     *  is the search input term to use and what value can be displayed\n     *  to the user. If there is no match, the input and display will be\n     *  the original input value.\n     *\n     *  @param {String} groupLoz - ex: \"group:value\"\n     *  @returns {Object} represents the values to display and use for inputVal\n     *    {\n     *      display: {String}, // like group:\"friendly name\"\n     *      input: {String}    // like group:pid1234\n     *    }\n     */\n    const getInputAndDisplayValsForGroup = (groupLoz) => {\n      let groupVal = groupLoz.substr(groupLoz.indexOf(':') + 1).trim();\n      let inputVal = groupVal.trim();\n      let displayVal = groupVal;\n      const wrapQuotesIfNeeded = function(str) {\n        return str.indexOf(' ') > -1 ? `\"${str}\"` : str;\n      };\n\n\n      // remove quotes from value\n      if (groupVal[0] === '\"' || groupVal[0] === '\\'') {\n        groupVal = groupVal.substr(1);\n      }\n      if (groupVal[groupVal.length - 1] === '\"' || groupVal[groupVal.length - 1] === '\\'') {\n        groupVal = groupVal.slice(0, -1);\n      }\n\n      const matchVal = normalizeStr(groupVal).toLowerCase();\n\n      // NOTE: We are pushing a pubid to lowercase here. These ids are created by us\n      // in a random generation case-sensistive style. Theoretically, that means\n      // casting to lower could cause overlaps of values like 'Abc' and 'aBC' - making\n      // them equal to us. Since that is very unlikely to occur for one user's group\n      // set, the convenience of being defensive about bad input/urls is more valuable\n      // than the risk of overlap.\n      const matchByPubid = this._suggestionsMap.find((item) => {\n        return item.type === GROUP_TYPE && item.pubid.toLowerCase() === matchVal;\n      });\n\n      if (matchByPubid) {\n        inputVal = matchByPubid.pubid;\n        displayVal = wrapQuotesIfNeeded(matchByPubid.name);\n      } else {\n        const matchByName = this._suggestionsMap.find((item) => {\n          return item.type === GROUP_TYPE && item.matchOn.toLowerCase() === matchVal;\n        });\n        if (matchByName) {\n          inputVal = matchByName.pubid;\n          displayVal = wrapQuotesIfNeeded(matchByName.name);\n        }\n      }\n\n      return {\n        input: 'group:' + inputVal,\n        display: 'group:' + displayVal,\n      };\n    };\n\n    /**\n     * Insert a hidden <input> with an empty value into the search <form>.\n     *\n     * The name=\"q\" attribute is moved from the visible <input> on to the\n     * hidden <input> so that when the <form> is submitted it's the value of\n     * the _hidden_ input, not the visible one, that is submitted as the\n     * q parameter.\n     *\n     */\n    const insertHiddenInput = () => {\n      const hiddenInput = document.createElement('input');\n      hiddenInput.type = 'hidden';\n\n      // When JavaScript isn't enabled this._input is submitted to the server\n      // as the q param. With JavaScript we submit hiddenInput instead.\n      hiddenInput.name = this._input.name;\n      this._input.removeAttribute('name');\n\n      this.refs.searchBarForm.appendChild(hiddenInput);\n      return hiddenInput;\n    };\n\n    /** Return the controllers for all of the displayed lozenges. */\n    const lozenges = () => {\n      const lozElements = Array.from(this.element.querySelectorAll('.js-lozenge'));\n      return lozElements.map(el => el.controllers[0]);\n    };\n\n    /**\n     * Update the value of the hidden input.\n     *\n     * Update the value of the hidden input based on the contents of any\n     * lozenges and any remaining text in the visible input.\n     *\n     * This should be called whenever a lozenge is added to or removed from\n     * the DOM, and whenever the text in the visible input changes.\n     *\n     */\n    const updateHiddenInput = () => {\n      let newValue = '';\n      lozenges().forEach((loz) => {\n        let inputValue = loz.inputValue();\n        if (inputValue.indexOf('group:') === 0) {\n          inputValue = getInputAndDisplayValsForGroup(inputValue).input;\n        }\n        newValue = newValue + inputValue + ' ';\n      });\n      this._hiddenInput.value = (newValue + getTrimmedInputValue()).trim();\n    };\n\n    /**\n     * Creates a lozenge and sets the content string to the\n     * content provided and executes the delete callback when\n     * the lozenge is deleted.\n     *\n     * @param {string} content The search term\n     */\n    const addLozenge = (content) => {\n\n      const lozengeEl = cloneTemplate(this.options.lozengeTemplate);\n      const currentLozenges = this.element.querySelectorAll('.lozenge');\n      if (currentLozenges.length > 0) {\n        this._lozengeContainer.insertBefore(lozengeEl,\n          currentLozenges[currentLozenges.length-1].nextSibling);\n      } else {\n        this._lozengeContainer.insertBefore(lozengeEl,\n          this._lozengeContainer.firstChild);\n      }\n\n      const deleteCallback = () => {\n        lozengeEl.remove();\n        lozenges().forEach(ctrl => ctrl.setState({disabled: true}));\n        updateHiddenInput();\n        this.refs.searchBarForm.submit();\n      };\n\n      // groups have extra logic to show one value\n      // but have their input/search value be different\n      // make sure we grab the right value to display\n      if (content.indexOf('group:') === 0) {\n        content = getInputAndDisplayValsForGroup(content).display;\n      }\n\n      new LozengeController(lozengeEl, {\n        content,\n        deleteCallback,\n      });\n    };\n\n    /**\n     * Create lozenges for the search query terms already in the input field on\n     * page load and update lozenges that are already in the lozenges container\n     * so they are hooked up with the proper event handling\n     */\n    const lozengifyInput = () => {\n\n      const {lozengeValues, incompleteInputValue} = SearchTextParser.getLozengeValues(this._input.value);\n\n      lozengeValues.forEach(addLozenge);\n      this._input.value = incompleteInputValue;\n      this._input.style.visibility = 'visible';\n      updateHiddenInput();\n    };\n\n\n    const onInputKeyDown = (event) => {\n      const SPACE_KEY_CODE = 32;\n\n      if (event.keyCode === SPACE_KEY_CODE) {\n        const word = getTrimmedInputValue();\n        if (SearchTextParser.shouldLozengify(word)) {\n          event.preventDefault();\n          addLozenge(word);\n          this._input.value = '';\n          updateHiddenInput();\n        }\n      }\n    };\n\n\n    this._hiddenInput = insertHiddenInput(this.refs.searchBarForm);\n\n\n    this._suggestionsHandler = new AutosuggestDropdownController( this._input, {\n\n      list: this._suggestionsMap,\n\n      header: 'Narrow your search:',\n\n      classNames: {\n        container: 'search-bar__dropdown-menu-container',\n        header: 'search-bar__dropdown-menu-header',\n        list: 'search-bar__dropdown-menu',\n        item: 'search-bar__dropdown-menu-item',\n        activeItem: 'js-search-bar-dropdown-menu-item--active',\n      },\n\n      renderListItem: (listItem) => {\n\n        let itemContents = `<span class=\"search-bar__dropdown-menu-title\"> ${escapeHtml(listItem.title)} </span>`;\n\n        if (listItem.explanation) {\n          itemContents += `<span class=\"search-bar__dropdown-menu-explanation\"> ${listItem.explanation} </span>`;\n        }\n\n        return itemContents;\n      },\n\n      listFilter: (list, currentInput) => {\n\n        currentInput = (currentInput || '').trim();\n\n        let typeFilter = FACET_TYPE;\n        const inputLower = currentInput.toLowerCase();\n        if (inputLower.indexOf('tag:') === 0) {\n          typeFilter = TAG_TYPE;\n        } else if (inputLower.indexOf('group:') === 0) {\n          typeFilter = GROUP_TYPE;\n        }\n\n        let inputFilter = normalizeStr(currentInput);\n\n        if (typeFilter === TAG_TYPE || typeFilter === GROUP_TYPE) {\n          inputFilter = inputFilter.substr(inputFilter.indexOf(':') + 1);\n\n          // remove the initial quote for comparisons if it exists\n          if (inputFilter[0] === '\\'' || inputFilter[0] === '\"') {\n            inputFilter = inputFilter.substr(1);\n          }\n        }\n\n        if (this.state.suggestionsType !== typeFilter) {\n          this.setState({\n            suggestionsType: typeFilter,\n          });\n        }\n\n        return list.filter((item) => {\n          return item.type === typeFilter && item.matchOn.toLowerCase().indexOf(inputFilter.toLowerCase()) >= 0;\n        }).sort((a,b) => {\n\n          // this sort functions intention is to\n          // sort partial matches as lower index match\n          // value first. Then let natural sort of the\n          // original list take effect if they have equal\n          // index values or there is no current input value\n\n          if (inputFilter) {\n            const aIndex = a.matchOn.indexOf(inputFilter);\n            const bIndex = b.matchOn.indexOf(inputFilter);\n\n            // match score\n            if (aIndex > bIndex) {\n              return 1;\n            } else if (aIndex < bIndex) {\n              return -1;\n            }\n          }\n\n\n          // If we are filtering on tags, we need to arrange\n          // by popularity\n          if (typeFilter === TAG_TYPE) {\n            if (a.usageCount > b.usageCount) {\n              return -1;\n            } else if (a.usageCount < b.usageCount) {\n              return 1;\n            }\n          }\n\n          return 0;\n\n        }).slice(0, MAX_SUGGESTIONS);\n      },\n\n      onSelect: (itemSelected) => {\n\n        if (itemSelected.type === TAG_TYPE || itemSelected.type === GROUP_TYPE) {\n          const prefix = itemSelected.type === TAG_TYPE ? 'tag:' : 'group:';\n\n          let valSelection = itemSelected.title;\n\n          // wrap multi word phrases with quotes to keep\n          // autosuggestions consistent with what user needs to do\n          if (valSelection.indexOf(' ') > -1) {\n            valSelection = `\"${valSelection}\"`;\n          }\n\n          addLozenge(prefix + valSelection);\n\n          this._input.value = '';\n        } else {\n          this._input.value = itemSelected.title;\n          setTimeout(() => {\n            this._input.focus();\n          }, 0);\n        }\n        updateHiddenInput();\n      },\n\n    });\n\n    this._input.addEventListener('keydown', onInputKeyDown);\n    this._input.addEventListener('input', updateHiddenInput);\n    lozengifyInput();\n  }\n\n  update(newState, prevState) {\n\n    if (!this._suggestionsHandler) {\n      return;\n    }\n\n    if (newState.suggestionsType !== prevState.suggestionsType) {\n      if (newState.suggestionsType === TAG_TYPE) {\n        this._suggestionsHandler.setHeader('Popular tags:');\n      } else if (newState.suggestionsType === GROUP_TYPE) {\n        this._suggestionsHandler.setHeader('Your groups:');\n      } else {\n        this._suggestionsHandler.setHeader('Narrow your search:');\n      }\n    }\n\n  }\n}\n\nmodule.exports = SearchBarController;\n",
    "'use strict';\n\nconst scrollIntoView = require('scroll-into-view');\n\nconst Controller = require('../base/controller');\nconst setElementState = require('../util/dom').setElementState;\n\n/**\n * @typedef Options\n * @property {EnvironmentFlags} [envFlags] - Environment flags. Provided as a\n *           test seam.\n * @property {Function} [scrollTo] - A function that scrolls a given element\n *           into view. Provided as a test seam.\n */\n\n/**\n * Controller for buckets of results in the search result list\n */\nclass SearchBucketController extends Controller {\n  /**\n   * @param {Element} element\n   * @param {Options} options\n   */\n  constructor(element, options) {\n    super(element, options);\n\n    this.scrollTo = this.options.scrollTo || scrollIntoView;\n\n    this.refs.header.addEventListener('click', (event) => {\n      if (this.refs.domainLink.contains(event.target)) {\n        return;\n      }\n      this.setState({expanded: !this.state.expanded});\n    });\n\n    this.refs.title.addEventListener('click', (event) => {\n      this.setState({expanded: !this.state.expanded});\n      event.stopPropagation();\n    });\n\n    this.refs.collapseView.addEventListener('click', () => {\n      this.setState({expanded: !this.state.expanded});\n    });\n\n    const envFlags = this.options.envFlags || window.envFlags;\n\n    this.setState({\n      expanded: !!envFlags.get('js-timeout'),\n    });\n  }\n\n  update(state, prevState) {\n    setElementState(this.refs.content, {expanded: state.expanded});\n    setElementState(this.element, {expanded: state.expanded});\n\n    this.refs.title.setAttribute('aria-expanded', state.expanded.toString());\n\n    // Scroll to element when expanded, except on initial load\n    if (typeof prevState.expanded !== 'undefined' && state.expanded) {\n      this.scrollTo(this.element);\n    }\n  }\n}\n\nmodule.exports = SearchBucketController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\n\nconst CONFIG_ATTR = 'share-widget-config';\nconst TRIGGER_SELECTOR = `[${CONFIG_ATTR}]`;\nconst WIDGET_SELECTOR = '.js-share-widget-owner';\nconst TARGET_HREF_ATTR = 'share-target-href';\nconst TARGET_HREF_SELECTOR = `[${TARGET_HREF_ATTR}]`;\nconst CLIPBOARD_INPUT_SELECTOR = '.js-share-widget-clipboard';\nconst PRIVATE_MSG_SELECTOR = '.js-share-widget-msg-private';\nconst GROUP_MSG_SELECTOR = '.js-share-widget-msg-group';\n\nconst ARROW_PADDING_RIGHT =  16;\nconst ARROW_PADDING_BOTTOM =  5;\n\nlet shareWidgetAttached = false;\n\nconst getOffset = (el) => {\n  el = el.getBoundingClientRect();\n  return {\n    // adjust for top left of the document\n    left: el.left + window.pageXOffset,\n    top: el.top + window.pageYOffset,\n    width: el.width,\n    height: el.height,\n  };\n};\n\n\nclass ShareWidget {\n\n  constructor(containerElement) {\n\n    // we only attach one to the dom since it's a global listener\n    if (shareWidgetAttached) {\n      return;\n    }\n    shareWidgetAttached = true;\n\n    this._currentTrigger = null;\n    this._container = containerElement;\n    this._widget = this._container.querySelector(WIDGET_SELECTOR);\n    this._widgetVisible = false;\n\n    // on initialize we need to reset container visbility\n    this.hide();\n\n    this._handler = (event) => {\n\n      const target = event.target;\n\n      // do nothing if we are clicking inside of the widget\n      if (this._container.contains(target)) {\n        return;\n      }\n\n      const trigger = target.closest(TRIGGER_SELECTOR);\n\n      if (trigger) {\n\n        const config = JSON.parse(trigger.getAttribute(CONFIG_ATTR));\n\n        // if we click the same trigger twice we expect\n        // to close the current trigger. Otherwise, we need\n        // to move to the new trigger and open\n        if (trigger === this._currentTrigger && this._widgetVisible) {\n          this.hide();\n        } else {\n          this.showForNode(trigger, config);\n        }\n\n        if (trigger !== this._currentTrigger) {\n          this._currentTrigger = trigger;\n        }\n\n        event.preventDefault();\n        event.stopPropagation();\n        event.stopImmediatePropagation();\n        return;\n\n      }\n\n      // hide the widget if the click was not handled by\n      // clicking on the triggers or widget itself\n      if (this._widgetVisible) {\n        this.hide();\n      }\n    };\n\n    window.document.body.addEventListener('click', this._handler);\n  }\n\n  /**\n   * @typedef {Object} ConfigOptions\n   * @property {String} url - the url we are enabling to be shared\n   * @property {Bool} [private] - is the card only visible to this user\n   * @property {Bool} [group] - is the card posted in a group scope\n   */\n\n  /**\n   * Update the template based on the config variables passed in\n   *\n   * @param  {ConfigOptions} config The details we need to apply update our template\n   *   with the correct information per card.\n   */\n  _renderWidgetTemplate(config) {\n\n    // copy to clipboard input\n    this._widget.querySelector(CLIPBOARD_INPUT_SELECTOR).value = config.url;\n\n    // social links\n    Array.from(this._widget.querySelectorAll(TARGET_HREF_SELECTOR)).forEach((target) => {\n      target.href = target.getAttribute(TARGET_HREF_ATTR).replace('{href}', encodeURI(config.url));\n    });\n\n    // scope access dialog\n    const privateMessage = this._widget.querySelector(PRIVATE_MSG_SELECTOR);\n    const groupMessage = this._widget.querySelector(GROUP_MSG_SELECTOR);\n\n    privateMessage.style.display = 'none';\n    groupMessage.style.display = 'none';\n\n    if (config.private) {\n      privateMessage.style.display = 'block';\n    } else if (config.group) {\n      groupMessage.style.display = 'block';\n    }\n  }\n\n\n  /**\n   * Given a node, update the template, repostion the widget properly,\n   *  and make it visible.\n   *\n   * @param  {HTMLElement} node The trigger node that we will place the widget\n   *   next to.\n   * @param  {ConfigOptions} config Passed through to rendering/interpolation\n   */\n  showForNode(node, config) {\n\n    if (!node || !config) {\n      throw new Error('showForNode did not recieve both arguments');\n    }\n\n    this._renderWidgetTemplate(config);\n\n    // offsets affecting height need to be updated after variable replacement\n    const widgetOffsets =  getOffset(this._widget);\n    const nodeOffset = getOffset(node);\n\n    this._widget.style.top = (nodeOffset.top - widgetOffsets.height - ARROW_PADDING_BOTTOM) + 'px';\n    this._widget.style.left = ((ARROW_PADDING_RIGHT + nodeOffset.left + (nodeOffset.width / 2)) - widgetOffsets.width) + 'px';\n\n    this._container.style.visibility = 'visible';\n\n    this._widgetVisible = true;\n  }\n\n  hide() {\n    this._container.style.visibility = 'hidden';\n    this._widgetVisible = false;\n  }\n\n\n  /**\n   * Utility to clean up the listeners applied. Otherwise the subsequent\n   * constructor will reset all other state. Primary use is meant for testing cleanup\n   */\n  detach() {\n    window.document.body.removeEventListener('click', this._handler);\n  }\n}\n\n/**\n * ShareWidgetController is the facade for the ShareWidget class that\n * does not mix the concerns of how our controller's lifecycle paradigm\n * in with the library code itself. Basically it maps what we define the\n * lifecycle of a controller to be into the appropriate method invocations on\n * the libraries api\n */\nclass ShareWidgetController extends Controller {\n\n  constructor(element, options = {}) {\n    super(element, options);\n\n    if (!shareWidgetAttached) {\n      shareWidgetAttached = new ShareWidget(element);\n    }\n  }\n\n  beforeRemove() {\n    if (shareWidgetAttached) {\n      shareWidgetAttached.detach();\n      shareWidgetAttached = null;\n    }\n  }\n}\n\nmodule.exports = ShareWidgetController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\n\nclass SignupFormController extends Controller {\n  constructor(element) {\n    super(element);\n\n    const submitBtn = element.querySelector('.js-signup-btn');\n\n    element.addEventListener('submit', () => {\n      submitBtn.disabled = true;\n    });\n  }\n}\n\nmodule.exports = SignupFormController;\n",
    "'use strict';\n\nconst Controller = require('../base/controller');\n\n/**\n * A custom tooltip similar to the one used in Google Docs which appears\n * instantly when activated on a target element.\n *\n * The tooltip is displayed and hidden by setting its target element.\n *\n *  var tooltip = new Tooltip(document.body);\n *  tooltip.setState({target: aWidget}); // Show tooltip\n *  tooltip.setState({target: null}); // Hide tooltip\n *\n * The tooltip's label is derived from the target element's 'aria-label'\n * attribute.\n */\nclass TooltipController extends Controller {\n  constructor(el) {\n    super(el);\n\n    // With mouse input, show the tooltip on hover. On touch devices we rely on\n    // the browser to synthesize 'mouseover' events to make the tooltip appear\n    // when the host element is tapped and disappear when the host element loses\n    // focus.\n    // See http://www.codediesel.com/javascript/making-mouseover-event-work-on-an-ipad/\n    el.addEventListener('mouseover', () => {\n      this.setState({target: el});\n    });\n\n    el.addEventListener('mouseout', () => {\n      this.setState({target: null});\n    });\n\n    this._tooltipEl = el.ownerDocument.createElement('div');\n    this._tooltipEl.innerHTML = '<span class=\"tooltip-label js-tooltip-label\"></span>';\n    this._tooltipEl.className = 'tooltip';\n    el.appendChild(this._tooltipEl);\n    this._labelEl = this._tooltipEl.querySelector('.js-tooltip-label');\n\n    this.setState({target: null});\n  }\n\n  update(state) {\n    if (!state.target) {\n      this._tooltipEl.style.visibility = 'hidden';\n      return;\n    }\n\n    const target = state.target;\n    const label = target.getAttribute('aria-label');\n    this._labelEl.textContent = label;\n\n    Object.assign(this._tooltipEl.style, {\n      visibility: '',\n      bottom: 'calc(100% + 5px)',\n    });\n  }\n}\n\nmodule.exports = TooltipController;\n",
    "'use strict';\n\n// ES2015 polyfills\nrequire('core-js/es6/promise');\nrequire('core-js/fn/array/find');\nrequire('core-js/fn/array/find-index');\nrequire('core-js/fn/array/from');\nrequire('core-js/fn/array/includes');\nrequire('core-js/fn/object/assign');\nrequire('core-js/fn/string/starts-with');\n\n// Sets Element.prototype.closest and Element.prototype.matches\nrequire('element-closest');\n\n// String.prototype.normalize()\n// FIXME: This is a large polyfill which should be only loaded when necessary\nrequire('unorm');\n\n// Element.prototype.dataset, required by IE 10\nrequire('element-dataset')();\n\n// Element.prototype.remove. Required by IE 10/11\nif (!Element.prototype.remove) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\n\n// URL constructor, required by IE 10/11,\n// early versions of Microsoft Edge.\ntry {\n  new window.URL('https://hypothes.is');\n} catch (err) {\n  require('js-polyfills/url');\n}\n\n// KeyboardEvent.prototype.key\n// (Native in Chrome >= 51, Firefox >= 23, IE >= 9)\nrequire('keyboardevent-key-polyfill').polyfill();\n\n// Fetch API\n// https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\nrequire('whatwg-fetch');\n",
    "'use strict';\n\n// Configure error reporting\nconst settings = require('./base/settings')(document);\nif (settings.raven) {\n  const raven = require('./base/raven');\n  raven.init(settings.raven);\n}\n\nrequire('./polyfills');\n\nconst CharacterLimitController = require('./controllers/character-limit-controller');\nconst CopyButtonController = require('./controllers/copy-button-controller');\nconst ConfirmSubmitController = require('./controllers/confirm-submit-controller');\nconst CreateGroupFormController = require('./controllers/create-group-form-controller');\nconst DropdownMenuController = require('./controllers/dropdown-menu-controller');\nconst FormController = require('./controllers/form-controller');\nconst FormSelectOnFocusController = require('./controllers/form-select-onfocus-controller');\nconst InputAutofocusController = require('./controllers/input-autofocus-controller');\nconst SearchBarController = require('./controllers/search-bar-controller');\nconst SearchBucketController = require('./controllers/search-bucket-controller');\nconst ShareWidgetController = require('./controllers/share-widget-controller');\nconst SignupFormController = require('./controllers/signup-form-controller');\nconst TooltipController = require('./controllers/tooltip-controller');\nconst upgradeElements = require('./base/upgrade-elements');\n\nconst controllers = {\n  '.js-character-limit': CharacterLimitController,\n  '.js-copy-button': CopyButtonController,\n  '.js-confirm-submit': ConfirmSubmitController,\n  '.js-create-group-form': CreateGroupFormController,\n  '.js-dropdown-menu': DropdownMenuController,\n  '.js-form': FormController,\n  '.js-input-autofocus': InputAutofocusController,\n  '.js-select-onfocus': FormSelectOnFocusController,\n  '.js-search-bar': SearchBarController,\n  '.js-search-bucket': SearchBucketController,\n  '.js-share-widget': ShareWidgetController,\n  '.js-signup-form': SignupFormController,\n  '.js-tooltip': TooltipController,\n};\n\nif (window.envFlags && window.envFlags.get('js-capable')) {\n  upgradeElements(document.body, controllers);\n  window.envFlags.ready();\n} else {\n  // Environment flags not initialized. The header script may have been missed\n  // in the page or may have failed to load.\n  console.warn('EnvironmentFlags not initialized. Skipping element upgrades');\n}\n",
    "'use strict';\n\nconst stringUtil = require('./string');\n\nconst hyphenate = stringUtil.hyphenate;\n\n/**\n * Utility functions for DOM manipulation.\n */\n\n/**\n * Set the state classes (`is-$state`) on an element.\n *\n * @param {Element} el\n * @param {Object} state - A map of state keys to boolean. For each key `k`,\n *                 the class `is-$k` will be added to the element if the value\n *                 is true or removed otherwise.\n */\nfunction setElementState(el, state) {\n  Object.keys(state).forEach((key) => {\n    const stateClass = 'is-' + hyphenate(key);\n    if (state[key]) {\n      el.classList.add(stateClass);\n    } else {\n      el.classList.remove(stateClass);\n    }\n  });\n}\n\n/**\n * Search the DOM tree starting at `el` and return a map of \"data-ref\" attribute\n * values to elements.\n *\n * This provides a way to label parts of a control in markup and get a\n * reference to them subsequently in code.\n */\nfunction findRefs(el) {\n  const map = {};\n\n  const descendantsWithRef = el.querySelectorAll('[data-ref]');\n  for (let i=0; i < descendantsWithRef.length; i++) {\n    // Use `Element#getAttribute` rather than `Element#dataset` to support IE 10\n    // and avoid https://bugs.webkit.org/show_bug.cgi?id=161454\n    const refEl = descendantsWithRef[i];\n    const refs = (refEl.getAttribute('data-ref') || '').split(' ');\n    refs.forEach((ref) => {\n      map[ref] = refEl;\n    });\n  }\n\n  return map;\n}\n\n/**\n * Return the first child of `node` which is an `Element`.\n *\n * Work around certain browsers (IE, Edge) not supporting firstElementChild on\n * Document, DocumentFragment.\n *\n * @param {Node} node\n */\nfunction firstElementChild(node) {\n  for (let i=0; i < node.childNodes.length; i++) {\n    if (node.childNodes[i].nodeType === Node.ELEMENT_NODE) {\n      return node.childNodes[i];\n    }\n  }\n  return null;\n}\n\n/**\n * Clone the content of a <template> element and return the first child Element.\n *\n * @param {HTMLTemplateElement} templateEl\n */\nfunction cloneTemplate(templateEl) {\n  if (templateEl.content) {\n    // <template> supported natively.\n    const content = templateEl.content.cloneNode(true);\n    return firstElementChild(content);\n  } else {\n    // <template> not supported. Browser just treats it as an unknown Element.\n    return templateEl.firstElementChild.cloneNode(true);\n  }\n}\n\nmodule.exports = {\n  cloneTemplate,\n  findRefs,\n  setElementState,\n};\n",
    "'use strict';\n\n// Focus release function returned by most recent call to trap()\nlet currentReleaseFn;\n\n/**\n * Trap focus within a group of elements.\n *\n * Watch focus changes in a document and react to and/or prevent focus moving\n * outside a specified group of elements.\n *\n * @param {Element[]} elements - Array of elements which make up the modal group\n * @param {(Element) => Element|null} callback - Callback which is invoked when\n *        focus tries to move outside the modal group. It is called with the\n *        new element that will be focused. If it returns null, the focus change\n *        will proceed, otherwise if it returns an element within the group,\n *        that element will be focused instead.\n * @return {Function} A function which releases the modal focus, if it has not\n *        been changed by another call to trap() in the meantime.\n */\nfunction trap(elements, callback) {\n  if (currentReleaseFn) {\n    currentReleaseFn();\n  }\n\n  // The most obvious way of detecting an element losing focus and reacting\n  // based on the new focused element is the \"focusout\" event and the\n  // FocusEvent#relatedTarget property.\n  //\n  // However, FocusEvent#relatedTarget is not implemented in all browsers\n  // (Firefox < 48, IE) and is null in some cases even for browsers that do\n  // support it.\n  //\n  // Instead we watch the 'focus' event on the document itself.\n\n  const onFocusChange = (event) => {\n    if (elements.some(el => el.contains(event.target))) {\n      // Focus remains within modal group\n      return;\n    }\n\n    // Focus is trying to move outside of the modal group, test whether to\n    // allow this\n    const newTarget = callback(event.target);\n    if (newTarget) {\n      event.preventDefault();\n      event.stopPropagation();\n      newTarget.focus();\n    } else if (currentReleaseFn) {\n      currentReleaseFn();\n    }\n  };\n  document.addEventListener('focus', onFocusChange, true /* useCapture */);\n\n  const releaseFn = () => {\n    if (currentReleaseFn === releaseFn) {\n      currentReleaseFn = null;\n      document.removeEventListener('focus', onFocusChange, true /* useCapture */);\n    }\n  };\n  currentReleaseFn = releaseFn;\n  return releaseFn;\n}\n\nmodule.exports = {\n  trap,\n};\n",
    "'use strict';\n\n/**\n * Function which determines if it is possible to lozengify a given phrase.\n *\n * @param {string} phrase A potential query term.\n *\n * @returns {boolean} True if the input phrase can be lozengified and false otherwise.\n *\n * @example\n * // returns True\n * canLozengify('foo')\n * @example\n * // returns False\n * canLozengify('foo)\n */\nfunction canLozengify(phrase) {\n  phrase = phrase.trim();\n  // if there is no word\n  if (!phrase) {\n    return false;\n  }\n  // if a phrase starts with a double quote, it has to have a closing double quote\n  if (phrase.indexOf('\"') === 0 && (phrase.indexOf('\"', 1) > phrase.length - 1 || phrase.indexOf('\"', 1) < 0)) {\n    return false;\n  }\n  // if a phrase starts with a single quote, it has to have a closing double quote\n  if (phrase.indexOf(\"'\") === 0 && (phrase.indexOf(\"'\", 1) > phrase.length - 1 || phrase.indexOf(\"'\", 1) < 0)) {\n    return false;\n  }\n  // if phrase ends with a double quote it has to start with one\n  if (phrase.indexOf('\"', 1) === phrase.length - 1 && phrase.indexOf('\"') !== 0) {\n    return false;\n  }\n  // if phrase ends with a single quote it has to start with one\n  if (phrase.indexOf(\"'\", 1) === phrase.length - 1 && phrase.indexOf(\"'\") !== 0) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Function which determines if a phrase can be lozengified as is or\n * if it needs to be divided into a facet name and value first.\n *\n * @param {string} phrase A potential query term.\n *\n * @returns {boolean} True if the input phrase is ready to be\n * lozengified and false otherwise.\n *\n * @example\n * // returns True\n * shouldLozengify('foo:bar')\n * @example\n * // returns False\n * shouldLozengify('foo:\"bar')\n */\nfunction shouldLozengify(phrase) {\n  // if the phrase has a facet and value\n  if (phrase.indexOf(':') >= 0) {\n    const queryTerm = getLozengeFacetNameAndValue(phrase);\n\n    if (!canLozengify(queryTerm.facetName)) {\n      return false;\n    }\n    if (queryTerm.facetValue.length > 0 && !canLozengify(queryTerm.facetValue)) {\n      return false;\n    }\n  }\n  else if (!canLozengify(phrase)) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Return an array of lozenge values from the given string.\n *\n * @param {string} queryString A string of query terms.\n *\n * @returns {Object} An object with two properties: lozengeValues is an array\n *   of values to be turned into lozenges, and incompleteInputValue is any\n *   remaining un-lozengifiable text from the end of the input string\n *\n * @example\n * // returns {\n *   'lozengeValues': ['foo', 'key:\"foo bar\"', 'gar'],\n *   'incompleteInputValue': '\"unclosed',\n * }\n * getLozengeValues('foo key:\"foo bar\" gar \"unclosed')\n */\nfunction getLozengeValues(queryString) {\n  let inputTerms = '';\n  let quoted;\n  const queryTerms = [];\n  queryString.split(' ').forEach((term) => {\n    if (quoted) {\n      inputTerms = inputTerms + ' ' + term;\n      if (shouldLozengify(inputTerms)) {\n        queryTerms.push(inputTerms);\n        inputTerms = '';\n        quoted = false;\n      }\n    } else if (shouldLozengify(term)) {\n      queryTerms.push(term);\n    } else {\n      inputTerms = term;\n      quoted = true;\n    }\n  });\n  return {\n    lozengeValues: queryTerms,\n    incompleteInputValue: inputTerms,\n  };\n}\n\n/**\n * Return true if the input query term string has a known named\n * query term.\n *\n * @param {string} queryTerm The query term string.\n *\n * @returns {boolean} True if the query term string has a known named\n * query term and False otherwise.\n *\n * @example\n * // returns false\n * hasKnownNamedQueryTerm('foo:bar')\n * @example\n * // returns true\n * hasKnownNamedQueryTerm('user:foo')\n */\nfunction hasKnownNamedQueryTerm(queryTerm) {\n  const knownNamedQueryTerms = ['user',\n    'uri',\n    'url',\n    'group',\n    'tag'];\n\n  const facetName = getLozengeFacetNameAndValue(queryTerm).facetName;\n\n  return knownNamedQueryTerms.indexOf(facetName) >= 0;\n}\n\n/**\n * Return an object with the facet name and value for a given query term.\n *\n * @param {string} queryTerm The query term string.\n *\n * @returns {Object} An object with two properties:\n * facetName and facetValue.\n *\n * @example\n * // returns {\n *   facetName: foo,\n *   facetValue: bar,\n * }\n * getLozengeFacetNameAndValue('foo:bar')\n * @example\n * // returns {\n *   facetName: '',\n *   facetValue: gar,\n * }\n * getLozengeFacetNameAndValue('gar')\n */\nfunction getLozengeFacetNameAndValue(queryTerm) {\n  let i;\n  const lozengeFacetNameAndValue = {\n    facetName: '',\n    facetValue: '',\n  };\n\n  if (queryTerm.indexOf(':') >= 0) {\n    i = queryTerm.indexOf(':');\n\n    lozengeFacetNameAndValue.facetName =\n      queryTerm.slice(0, i).trim();\n    lozengeFacetNameAndValue.facetValue =\n      queryTerm.slice(i+1, queryTerm.length).trim();\n\n    return lozengeFacetNameAndValue;\n  }\n\n  lozengeFacetNameAndValue.facetValue = queryTerm;\n\n  return lozengeFacetNameAndValue;\n}\n\nmodule.exports = {\n  shouldLozengify: shouldLozengify,\n  getLozengeValues: getLozengeValues,\n  getLozengeFacetNameAndValue: getLozengeFacetNameAndValue,\n  hasKnownNamedQueryTerm: hasKnownNamedQueryTerm,\n};\n",
    "'use strict';\n\n// Unicode combining characters\n// from http://xregexp.com/addons/unicode/unicode-categories.js line:30\nconst COMBINING_MARKS = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u08FE\\u0900-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C01-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C82\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D02\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1DC0-\\u1DE6\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]/g;\n\n/**\n * Convert a `camelCase` or `CapitalCase` string to `kebab-case`\n */\nfunction hyphenate(name) {\n  const uppercasePattern = /([A-Z])/g;\n  return name.replace(uppercasePattern, '-$1').toLowerCase();\n}\n\n/** Convert a `kebab-case` string to `camelCase` */\nfunction unhyphenate(name) {\n  const idx = name.indexOf('-');\n  if (idx === -1) {\n    return name;\n  } else {\n    const ch = (name[idx+1] || '').toUpperCase();\n    return unhyphenate(name.slice(0,idx) + ch + name.slice(idx+2));\n  }\n}\n\n/**\n * Normalize a string to NFKD form.\n *\n * In combination with `fold()` this can be used to create a representation of\n * a string which is useful for comparisons that should ignore differences in\n * accents/combining marks. See\n * http://www.unicode.org/reports/tr15/#Compatibility_Composite_Figure\n *\n * @example\n *\n * // returns true\n * fold(normalize('Éire')) === 'Eire'\n *\n * @param {String} str\n * @return {String}\n */\nfunction normalize(str) {\n  if (!String.prototype.normalize) {\n    return str;\n  }\n\n  return str.normalize('NFKD');\n}\n\n/**\n * Remove the combining marks from characters in Unicode strings\n *\n * This assumes that `str` has first been decomposed using `normalize()`.\n *\n * @param {String} str\n * @return {String}\n */\nfunction fold(str) {\n  return str.replace(COMBINING_MARKS, '');\n}\n\nmodule.exports = {\n  hyphenate: hyphenate,\n  unhyphenate: unhyphenate,\n  normalize: normalize,\n  fold: fold,\n};\n",
    "'use strict';\n\n/**\n * @typedef SubmitError\n * @property {number} status - HTTP status code. 400 if form submission failed\n *           due to a validation error or a different 4xx or 5xx code if it\n *           failed for other reasons.\n * @property {string} [form] - HTML markup for the form containing validation\n *           error messages if submission failed with a 400 status.\n * @property {string} [reason] - The status message if form submission failed\n *           for reasons other than a validation error.\n */\n\n/**\n * Exception thrown if form submission fails.\n *\n * @property {SubmitError} params - Describes why submission failed. These\n *           properties are exposed on the FormSubmitError instance.\n */\nclass FormSubmitError extends Error {\n  constructor(message, params) {\n    super(message);\n    Object.assign(this, params);\n  }\n}\n\n/**\n * Return the URL which a form should be submitted to.\n *\n * @param {HTMLFormElement} form\n */\nfunction formUrl(form) {\n  if (form.getAttribute('action')) {\n    return form.action;\n  } else {\n    // `form.action` returns an absolute URL created by resolving the URL\n    // in the \"action\" attribute against the document's location.\n    //\n    // Browsers except IE implement a special case where the document's URL\n    // is returned if the \"action\" attribute is missing or an empty string.\n    return document.location.href;\n  }\n}\n\n/**\n * @typedef {Object} SubmitResult\n * @property {number} status - Always 200\n * @property {string} form - The HTML markup for the re-rendered form\n */\n\n/**\n * Submit a form using the Fetch API and return the markup for the re-rendered\n * version of the form.\n *\n * @param {HTMLFormElement} formEl - The `<form>` to submit\n * @return {Promise<SubmitResult>} A promise which resolves when the form\n *         submission completes or rejects with a FormSubmitError if the server\n *         rejects the submission due to a validation error or the network\n *         request fails.\n */\nfunction submitForm(formEl, fetch = window.fetch) {\n  let response;\n  return fetch(formUrl(formEl), {\n    body: new FormData(formEl),\n    credentials: 'same-origin',\n    method: 'POST',\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n    },\n  }).then((response_) => {\n    response = response_;\n    return response.text();\n  }).then((body) => {\n    const { status } = response;\n    switch (status) {\n    case 200:\n      return {status, form: body};\n    case 400:\n      throw new FormSubmitError('Form validation failed', {\n        status, form: body,\n      });\n    default:\n      throw new FormSubmitError('Form submission failed', {\n        status,\n        reason: response.statusText,\n      });\n    }\n  });\n}\n\nmodule.exports = submitForm;\n",
    "'use strict';\n\nmodule.exports = {\n\n  /**\n   * compare two list arrays and decide if they have changed\n   *\n   * @param  {Array} listA\n   * @param  {Array} listB\n   * @returns {bool}       the result of comparing if the two\n   *   arrays seem like they have changed. True if they have changed\n   */\n  listIsDifferent: function(listA, listB) {\n\n    if (!(Array.isArray(listA) && Array.isArray(listB))) {\n      return true;\n    }\n\n    if (listA.length !== listB.length) {\n      return true;\n    }\n\n    return !listA.every((item, index) => {\n      return item === listB[index];\n    });\n  },\n};\n",
    "require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/$.core').Promise;",
    "require('../../modules/es6.array.find-index');\nmodule.exports = require('../../modules/$.core').Array.findIndex;",
    "require('../../modules/es6.array.find');\nmodule.exports = require('../../modules/$.core').Array.find;",
    "require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/$.core').Array.from;",
    "require('../../modules/es7.array.includes');\nmodule.exports = require('../../modules/$.core').Array.includes;",
    "require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/$.core').Object.assign;",
    "require('../../modules/es6.string.starts-with');\nmodule.exports = require('../../modules/$.core').String.startsWith;",
    "module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};",
    "// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./$.wks')('unscopables')\n  , ArrayProto  = Array.prototype;\nif(ArrayProto[UNSCOPABLES] == undefined)require('./$.hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function(key){\n  ArrayProto[UNSCOPABLES][key] = true;\n};",
    "var isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};",
    "// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./$.to-iobject')\n  , toLength  = require('./$.to-length')\n  , toIndex   = require('./$.to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index;\n    } return !IS_INCLUDES && -1;\n  };\n};",
    "// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./$.ctx')\n  , IObject  = require('./$.iobject')\n  , toObject = require('./$.to-object')\n  , toLength = require('./$.to-length')\n  , asc      = require('./$.array-species-create');\nmodule.exports = function(TYPE){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? asc($this, length) : IS_FILTER ? asc($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};",
    "// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar isObject = require('./$.is-object')\n  , isArray  = require('./$.is-array')\n  , SPECIES  = require('./$.wks')('species');\nmodule.exports = function(original, length){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length);\n};",
    "// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./$.cof')\n  , TAG = require('./$.wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};",
    "var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};",
    "var core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef",
    "// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};",
    "// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};",
    "// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});",
    "var isObject = require('./$.is-object')\n  , document = require('./$.global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};",
    "var global    = require('./$.global')\n  , core      = require('./$.core')\n  , hide      = require('./$.hide')\n  , redefine  = require('./$.redefine')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE]\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE] || (exports[PROTOTYPE] = {})\n    , key, own, out, exp;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if(target && !own)redefine(target, key, out);\n    // export\n    if(exports[key] != out)hide(exports, key, exp);\n    if(IS_PROTO && expProto[key] != out)expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;",
    "var MATCH = require('./$.wks')('match');\nmodule.exports = function(KEY){\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch(e){\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch(f){ /* empty */ }\n  } return true;\n};",
    "module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};",
    "var ctx         = require('./$.ctx')\n  , call        = require('./$.iter-call')\n  , isArrayIter = require('./$.is-array-iter')\n  , anObject    = require('./$.an-object')\n  , toLength    = require('./$.to-length')\n  , getIterFn   = require('./core.get-iterator-method');\nmodule.exports = function(iterable, entries, fn, that){\n  var iterFn = getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    call(iterator, f, step.value, entries);\n  }\n};",
    "// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef",
    "var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};",
    "var $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};",
    "module.exports = require('./$.global').document && document.documentElement;",
    "// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};",
    "// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};",
    "// check on default Array iterator\nvar Iterators  = require('./$.iterators')\n  , ITERATOR   = require('./$.wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};",
    "// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};",
    "module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};",
    "// 7.2.8 IsRegExp(argument)\nvar isObject = require('./$.is-object')\n  , cof      = require('./$.cof')\n  , MATCH    = require('./$.wks')('match');\nmodule.exports = function(it){\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};",
    "// call something on iterator step with safe closing on error\nvar anObject = require('./$.an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};",
    "'use strict';\nvar $              = require('./$')\n  , descriptor     = require('./$.property-desc')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./$.hide')(IteratorPrototype, require('./$.wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};",
    "'use strict';\nvar LIBRARY        = require('./$.library')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , hide           = require('./$.hide')\n  , has            = require('./$.has')\n  , Iterators      = require('./$.iterators')\n  , $iterCreate    = require('./$.iter-create')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , getProto       = require('./$').getProto\n  , ITERATOR       = require('./$.wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , methods, key;\n  // Fix native\n  if($native){\n    var IteratorPrototype = getProto($default.call(new Base));\n    // Set @@toStringTag to native iterators\n    setToStringTag(IteratorPrototype, TAG, true);\n    // FF fix\n    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    // fix Array#{values, @@iterator}.name in V8 / FF\n    if(DEF_VALUES && $native.name !== VALUES){\n      VALUES_BUG = true;\n      $default = function values(){ return $native.call(this); };\n    }\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n      keys:    IS_SET      ? $default : getMethod(KEYS),\n      entries: !DEF_VALUES ? $default : getMethod('entries')\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};",
    "var ITERATOR     = require('./$.wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};",
    "module.exports = function(done, value){\n  return {value: value, done: !!done};\n};",
    "module.exports = {};",
    "var $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};",
    "module.exports = false;",
    "var global    = require('./$.global')\n  , macrotask = require('./$.task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./$.cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, domain, fn;\n  if(isNode && (parent = process.domain)){\n    process.domain = null;\n    parent.exit();\n  }\n  while(head){\n    domain = head.domain;\n    fn     = head.fn;\n    if(domain)domain.enter();\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    if(domain)domain.exit();\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = 1\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = -toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function asap(fn){\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};",
    "// 19.1.2.1 Object.assign(target, source, ...)\nvar $        = require('./$')\n  , toObject = require('./$.to-object')\n  , IObject  = require('./$.iobject');\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = require('./$.fails')(function(){\n  var a = Object.assign\n    , A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return a({}, A)[S] != 7 || Object.keys(a({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , $$    = arguments\n    , $$len = $$.length\n    , index = 1\n    , getKeys    = $.getKeys\n    , getSymbols = $.getSymbols\n    , isEnum     = $.isEnum;\n  while($$len > index){\n    var S      = IObject($$[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  }\n  return T;\n} : Object.assign;",
    "module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};",
    "var redefine = require('./$.redefine');\nmodule.exports = function(target, src){\n  for(var key in src)redefine(target, key, src[key]);\n  return target;\n};",
    "// add fake Function#toString\n// for correct work wrapped methods / constructors with methods like LoDash isNative\nvar global    = require('./$.global')\n  , hide      = require('./$.hide')\n  , SRC       = require('./$.uid')('src')\n  , TO_STRING = 'toString'\n  , $toString = Function[TO_STRING]\n  , TPL       = ('' + $toString).split(TO_STRING);\n\nrequire('./$.core').inspectSource = function(it){\n  return $toString.call(it);\n};\n\n(module.exports = function(O, key, val, safe){\n  if(typeof val == 'function'){\n    val.hasOwnProperty(SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n    val.hasOwnProperty('name') || hide(val, 'name', key);\n  }\n  if(O === global){\n    O[key] = val;\n  } else {\n    if(!safe)delete O[key];\n    hide(O, key, val);\n  }\n})(Function.prototype, TO_STRING, function toString(){\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});",
    "// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};",
    "// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = require('./$').getDesc\n  , isObject = require('./$.is-object')\n  , anObject = require('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};",
    "'use strict';\nvar global      = require('./$.global')\n  , $           = require('./$')\n  , DESCRIPTORS = require('./$.descriptors')\n  , SPECIES     = require('./$.wks')('species');\n\nmodule.exports = function(KEY){\n  var C = global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};",
    "var def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};",
    "var global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};",
    "// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./$.an-object')\n  , aFunction = require('./$.a-function')\n  , SPECIES   = require('./$.wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};",
    "module.exports = function(it, Constructor, name){\n  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n  return it;\n};",
    "var toInteger = require('./$.to-integer')\n  , defined   = require('./$.defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};",
    "// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./$.is-regexp')\n  , defined  = require('./$.defined');\n\nmodule.exports = function(that, searchString, NAME){\n  if(isRegExp(searchString))throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};",
    "var ctx                = require('./$.ctx')\n  , invoke             = require('./$.invoke')\n  , html               = require('./$.html')\n  , cel                = require('./$.dom-create')\n  , global             = require('./$.global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./$.cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};",
    "var toInteger = require('./$.to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};",
    "// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};",
    "// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};",
    "// 7.1.15 ToLength\nvar toInteger = require('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};",
    "// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};",
    "var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};",
    "var store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};",
    "var classof   = require('./$.classof')\n  , ITERATOR  = require('./$.wks')('iterator')\n  , Iterators = require('./$.iterators');\nmodule.exports = require('./$.core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};",
    "'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./$.export')\n  , $find   = require('./$.array-methods')(6)\n  , KEY     = 'findIndex'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./$.add-to-unscopables')(KEY);",
    "'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./$.export')\n  , $find   = require('./$.array-methods')(5)\n  , KEY     = 'find'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./$.add-to-unscopables')(KEY);",
    "'use strict';\nvar ctx         = require('./$.ctx')\n  , $export     = require('./$.export')\n  , toObject    = require('./$.to-object')\n  , call        = require('./$.iter-call')\n  , isArrayIter = require('./$.is-array-iter')\n  , toLength    = require('./$.to-length')\n  , getIterFn   = require('./core.get-iterator-method');\n$export($export.S + $export.F * !require('./$.iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , $$      = arguments\n      , $$len   = $$.length\n      , mapfn   = $$len > 1 ? $$[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, $$len > 2 ? $$[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        result[index] = mapping ? call(iterator, mapfn, [step.value, index], true) : step.value;\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        result[index] = mapping ? mapfn(O[index], index) : O[index];\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n",
    "'use strict';\nvar addToUnscopables = require('./$.add-to-unscopables')\n  , step             = require('./$.iter-step')\n  , Iterators        = require('./$.iterators')\n  , toIObject        = require('./$.to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./$.iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');",
    "// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./$.export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./$.object-assign')});",
    "'use strict';\n// 19.1.3.6 Object.prototype.toString()\nvar classof = require('./$.classof')\n  , test    = {};\ntest[require('./$.wks')('toStringTag')] = 'z';\nif(test + '' != '[object z]'){\n  require('./$.redefine')(Object.prototype, 'toString', function toString(){\n    return '[object ' + classof(this) + ']';\n  }, true);\n}",
    "'use strict';\nvar $          = require('./$')\n  , LIBRARY    = require('./$.library')\n  , global     = require('./$.global')\n  , ctx        = require('./$.ctx')\n  , classof    = require('./$.classof')\n  , $export    = require('./$.export')\n  , isObject   = require('./$.is-object')\n  , anObject   = require('./$.an-object')\n  , aFunction  = require('./$.a-function')\n  , strictNew  = require('./$.strict-new')\n  , forOf      = require('./$.for-of')\n  , setProto   = require('./$.set-proto').set\n  , same       = require('./$.same-value')\n  , SPECIES    = require('./$.wks')('species')\n  , speciesConstructor = require('./$.species-constructor')\n  , asap       = require('./$.microtask')\n  , PROMISE    = 'Promise'\n  , process    = global.process\n  , isNode     = classof(process) == 'process'\n  , P          = global[PROMISE]\n  , empty      = function(){ /* empty */ }\n  , Wrapper;\n\nvar testResolve = function(sub){\n  var test = new P(empty), promise;\n  if(sub)test.constructor = function(exec){\n    exec(empty, empty);\n  };\n  (promise = P.resolve(test))['catch'](empty);\n  return promise === test;\n};\n\nvar USE_NATIVE = function(){\n  var works = false;\n  function P2(x){\n    var self = new P(x);\n    setProto(self, P2.prototype);\n    return self;\n  }\n  try {\n    works = P && P.resolve && testResolve();\n    setProto(P2, P);\n    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n    // actual Firefox has broken subclass support, test that\n    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n      works = false;\n    }\n    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n    if(works && require('./$.descriptors')){\n      var thenableThenGotten = false;\n      P.resolve($.setDesc({}, 'then', {\n        get: function(){ thenableThenGotten = true; }\n      }));\n      works = thenableThenGotten;\n    }\n  } catch(e){ works = false; }\n  return works;\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // library wrapper special case\n  if(LIBRARY && a === P && b === Wrapper)return true;\n  return same(a, b);\n};\nvar getConstructor = function(C){\n  var S = anObject(C)[SPECIES];\n  return S != undefined ? S : C;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar PromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve),\n  this.reject  = aFunction(reject)\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(record, isReject){\n  if(record.n)return;\n  record.n = true;\n  var chain = record.c;\n  asap(function(){\n    var value = record.v\n      , ok    = record.s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , result, then;\n      try {\n        if(handler){\n          if(!ok)record.h = true;\n          result = handler === true ? value : handler(value);\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    chain.length = 0;\n    record.n = false;\n    if(isReject)setTimeout(function(){\n      var promise = record.p\n        , handler, console;\n      if(isUnhandled(promise)){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      } record.a = undefined;\n    }, 1);\n  });\n};\nvar isUnhandled = function(promise){\n  var record = promise._d\n    , chain  = record.a || record.c\n    , i      = 0\n    , reaction;\n  if(record.h)return false;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar $reject = function(value){\n  var record = this;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  record.v = value;\n  record.s = 2;\n  record.a = record.c.slice();\n  notify(record, true);\n};\nvar $resolve = function(value){\n  var record = this\n    , then;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  try {\n    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      asap(function(){\n        var wrapper = {r: record, d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      record.v = value;\n      record.s = 1;\n      notify(record, false);\n    }\n  } catch(e){\n    $reject.call({r: record, d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  P = function Promise(executor){\n    aFunction(executor);\n    var record = this._d = {\n      p: strictNew(this, P, PROMISE),         // <- promise\n      c: [],                                  // <- awaiting reactions\n      a: undefined,                           // <- checked in isUnhandled reactions\n      s: 0,                                   // <- state\n      d: false,                               // <- done\n      v: undefined,                           // <- value\n      h: false,                               // <- handled rejection\n      n: false                                // <- notify\n    };\n    try {\n      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n    } catch(err){\n      $reject.call(record, err);\n    }\n  };\n  require('./$.redefine-all')(P.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction = new PromiseCapability(speciesConstructor(this, P))\n        , promise  = reaction.promise\n        , record   = this._d;\n      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      record.c.push(reaction);\n      if(record.a)record.a.push(reaction);\n      if(record.s)notify(record, false);\n      return promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\nrequire('./$.set-to-string-tag')(P, PROMISE);\nrequire('./$.set-species')(PROMISE);\nWrapper = require('./$.core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = new PromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n    var capability = new PromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./$.iter-detect')(function(iter){\n  P.all(iter)['catch'](function(){});\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject\n      , values     = [];\n    var abrupt = perform(function(){\n      forOf(iterable, false, values.push, values);\n      var remaining = values.length\n        , results   = Array(remaining);\n      if(remaining)$.each.call(values, function(promise, index){\n        var alreadyCalled = false;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled = true;\n          results[index] = value;\n          --remaining || resolve(results);\n        }, reject);\n      });\n      else resolve(results);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});",
    "'use strict';\nvar $at  = require('./$.string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./$.iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});",
    "// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export     = require('./$.export')\n  , toLength    = require('./$.to-length')\n  , context     = require('./$.string-context')\n  , STARTS_WITH = 'startsWith'\n  , $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./$.fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /*, position = 0 */){\n    var that   = context(this, searchString, STARTS_WITH)\n      , $$     = arguments\n      , index  = toLength(Math.min($$.length > 1 ? $$[1] : undefined, that.length))\n      , search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});",
    "'use strict';\nvar $export   = require('./$.export')\n  , $includes = require('./$.array-includes')(true);\n\n$export($export.P, 'Array', {\n  // https://github.com/domenic/Array.prototype.includes\n  includes: function includes(el /*, fromIndex = 0 */){\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./$.add-to-unscopables')('includes');",
    "require('./es6.array.iterator');\nvar global      = require('./$.global')\n  , hide        = require('./$.hide')\n  , Iterators   = require('./$.iterators')\n  , ITERATOR    = require('./$.wks')('iterator')\n  , NL          = global.NodeList\n  , HTC         = global.HTMLCollection\n  , NLProto     = NL && NL.prototype\n  , HTCProto    = HTC && HTC.prototype\n  , ArrayValues = Iterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\nif(NLProto && !NLProto[ITERATOR])hide(NLProto, ITERATOR, ArrayValues);\nif(HTCProto && !HTCProto[ITERATOR])hide(HTCProto, ITERATOR, ArrayValues);",
    "// element-closest | CC0-1.0 | github.com/jonathantneal/closest\n\n(function (ElementProto) {\n\tif (typeof ElementProto.matches !== 'function') {\n\t\tElementProto.matches = ElementProto.msMatchesSelector || ElementProto.mozMatchesSelector || ElementProto.webkitMatchesSelector || function matches(selector) {\n\t\t\tvar element = this;\n\t\t\tvar elements = (element.document || element.ownerDocument).querySelectorAll(selector);\n\t\t\tvar index = 0;\n\n\t\t\twhile (elements[index] && elements[index] !== element) {\n\t\t\t\t++index;\n\t\t\t}\n\n\t\t\treturn Boolean(elements[index]);\n\t\t};\n\t}\n\n\tif (typeof ElementProto.closest !== 'function') {\n\t\tElementProto.closest = function closest(selector) {\n\t\t\tvar element = this;\n\n\t\t\twhile (element && element.nodeType === 1) {\n\t\t\t\tif (element.matches(selector)) {\n\t\t\t\t\treturn element;\n\t\t\t\t}\n\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\t}\n})(window.Element.prototype);\n",
    "'use strict';\n\nfunction elementDatasetPolyfill() {\n\tif (!document.documentElement.dataset && (!Object.getOwnPropertyDescriptor(Element.prototype, 'dataset') || !Object.getOwnPropertyDescriptor(Element.prototype, 'dataset').get)) {\n\t\tvar descriptor = {};\n\n\t\tdescriptor.enumerable = true;\n\n\t\tdescriptor.get = function () {\n\t\t\tvar element = this;\n\t\t\tvar map = {};\n\t\t\tvar attributes = this.attributes;\n\n\t\t\tfunction toUpperCase(n0) {\n\t\t\t\treturn n0.charAt(1).toUpperCase();\n\t\t\t}\n\n\t\t\tfunction getter() {\n\t\t\t\treturn this.value;\n\t\t\t}\n\n\t\t\tfunction setter(name, value) {\n\t\t\t\tif (typeof value !== 'undefined') {\n\t\t\t\t\tthis.setAttribute(name, value);\n\t\t\t\t} else {\n\t\t\t\t\tthis.removeAttribute(name);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < attributes.length; i++) {\n\t\t\t\tvar attribute = attributes[i];\n\n\t\t\t\t// This test really should allow any XML Name without\n\t\t\t\t// colons (and non-uppercase for XHTML)\n\n\t\t\t\tif (attribute && attribute.name && /^data-\\w[\\w\\-]*$/.test(attribute.name)) {\n\t\t\t\t\tvar name = attribute.name;\n\t\t\t\t\tvar value = attribute.value;\n\n\t\t\t\t\t// Change to CamelCase\n\n\t\t\t\t\tvar propName = name.substr(5).replace(/-./g, toUpperCase);\n\n\t\t\t\t\tObject.defineProperty(map, propName, {\n\t\t\t\t\t\tenumerable: this.enumerable,\n\t\t\t\t\t\tget: getter.bind({ value: value || '' }),\n\t\t\t\t\t\tset: setter.bind(element, name)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn map;\n\t\t};\n\n\t\tObject.defineProperty(Element.prototype, 'dataset', descriptor);\n\t}\n}\n\nmodule.exports = elementDatasetPolyfill;",
    "/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n",
    "// URL Polyfill\n// Draft specification: https://url.spec.whatwg.org\n\n// Notes:\n// - Primarily useful for parsing URLs and modifying query parameters\n// - Should work in IE8+ and everything more modern, with es5.js polyfills\n\n(function (global) {\n  'use strict';\n\n  function isSequence(o) {\n    if (!o) return false;\n    if ('Symbol' in global && 'iterator' in global.Symbol &&\n        typeof o[Symbol.iterator] === 'function') return true;\n    if (Array.isArray(o)) return true;\n    return false;\n  }\n\n  function toArray(iter) {\n    return ('from' in Array) ? Array.from(iter) : Array.prototype.slice.call(iter);\n  }\n\n  (function() {\n\n    // Browsers may have:\n    // * No global URL object\n    // * URL with static methods only - may have a dummy constructor\n    // * URL with members except searchParams\n    // * Full URL API support\n    var origURL = global.URL;\n    var nativeURL;\n    try {\n      if (origURL) {\n        nativeURL = new global.URL('http://example.com');\n        if ('searchParams' in nativeURL)\n          return;\n        if (!('href' in nativeURL))\n          nativeURL = undefined;\n      }\n    } catch (_) {}\n\n    // NOTE: Doesn't do the encoding/decoding dance\n    function urlencoded_serialize(pairs) {\n      var output = '', first = true;\n      pairs.forEach(function (pair) {\n        var name = encodeURIComponent(pair.name);\n        var value = encodeURIComponent(pair.value);\n        if (!first) output += '&';\n        output += name + '=' + value;\n        first = false;\n      });\n      return output.replace(/%20/g, '+');\n    }\n\n    // NOTE: Doesn't do the encoding/decoding dance\n    function urlencoded_parse(input, isindex) {\n      var sequences = input.split('&');\n      if (isindex && sequences[0].indexOf('=') === -1)\n        sequences[0] = '=' + sequences[0];\n      var pairs = [];\n      sequences.forEach(function (bytes) {\n        if (bytes.length === 0) return;\n        var index = bytes.indexOf('=');\n        if (index !== -1) {\n          var name = bytes.substring(0, index);\n          var value = bytes.substring(index + 1);\n        } else {\n          name = bytes;\n          value = '';\n        }\n        name = name.replace(/\\+/g, ' ');\n        value = value.replace(/\\+/g, ' ');\n        pairs.push({ name: name, value: value });\n      });\n      var output = [];\n      pairs.forEach(function (pair) {\n        output.push({\n          name: decodeURIComponent(pair.name),\n          value: decodeURIComponent(pair.value)\n        });\n      });\n      return output;\n    }\n\n    function URLUtils(url) {\n      if (nativeURL)\n        return new origURL(url);\n      var anchor = document.createElement('a');\n      anchor.href = url;\n      return anchor;\n    }\n\n    function URLSearchParams(init) {\n      var $this = this;\n      this._list = [];\n\n      if (init === undefined || init === null) {\n        // no-op\n      } else if (init instanceof URLSearchParams) {\n        // In ES6 init would be a sequence, but special case for ES5.\n        this._list = urlencoded_parse(String(init));\n      } else if (typeof init === 'object' && isSequence(init)) {\n        toArray(init).forEach(function(e) {\n          if (!isSequence(e)) throw TypeError();\n          var nv = toArray(e);\n          if (nv.length !== 2) throw TypeError();\n          $this._list.push({name: String(nv[0]), value: String(nv[1])});\n        });\n      } else if (typeof init === 'object' && init) {\n        Object.keys(init).forEach(function(key) {\n          $this._list.push({name: String(key), value: String(init[key])});\n        });\n      } else {\n        init = String(init);\n        if (init.substring(0, 1) === '?')\n          init = init.substring(1);\n        this._list = urlencoded_parse(init);\n      }\n\n      this._url_object = null;\n      this._setList = function (list) { if (!updating) $this._list = list; };\n\n      var updating = false;\n      this._update_steps = function() {\n        if (updating) return;\n        updating = true;\n\n        if (!$this._url_object) return;\n\n        // Partial workaround for IE issue with 'about:'\n        if ($this._url_object.protocol === 'about:' &&\n            $this._url_object.pathname.indexOf('?') !== -1) {\n          $this._url_object.pathname = $this._url_object.pathname.split('?')[0];\n        }\n\n        $this._url_object.search = urlencoded_serialize($this._list);\n\n        updating = false;\n      };\n    }\n\n\n    Object.defineProperties(URLSearchParams.prototype, {\n      append: {\n        value: function (name, value) {\n          this._list.push({ name: name, value: value });\n          this._update_steps();\n        }, writable: true, enumerable: true, configurable: true\n      },\n\n      'delete': {\n        value: function (name) {\n          for (var i = 0; i < this._list.length;) {\n            if (this._list[i].name === name)\n              this._list.splice(i, 1);\n            else\n              ++i;\n          }\n          this._update_steps();\n        }, writable: true, enumerable: true, configurable: true\n      },\n\n      get: {\n        value: function (name) {\n          for (var i = 0; i < this._list.length; ++i) {\n            if (this._list[i].name === name)\n              return this._list[i].value;\n          }\n          return null;\n        }, writable: true, enumerable: true, configurable: true\n      },\n\n      getAll: {\n        value: function (name) {\n          var result = [];\n          for (var i = 0; i < this._list.length; ++i) {\n            if (this._list[i].name === name)\n              result.push(this._list[i].value);\n          }\n          return result;\n        }, writable: true, enumerable: true, configurable: true\n      },\n\n      has: {\n        value: function (name) {\n          for (var i = 0; i < this._list.length; ++i) {\n            if (this._list[i].name === name)\n              return true;\n          }\n          return false;\n        }, writable: true, enumerable: true, configurable: true\n      },\n\n      set: {\n        value: function (name, value) {\n          var found = false;\n          for (var i = 0; i < this._list.length;) {\n            if (this._list[i].name === name) {\n              if (!found) {\n                this._list[i].value = value;\n                found = true;\n                ++i;\n              } else {\n                this._list.splice(i, 1);\n              }\n            } else {\n              ++i;\n            }\n          }\n\n          if (!found)\n            this._list.push({ name: name, value: value });\n\n          this._update_steps();\n        }, writable: true, enumerable: true, configurable: true\n      },\n\n      entries: {\n        value: function() { return new Iterator(this._list, 'key+value'); },\n        writable: true, enumerable: true, configurable: true\n      },\n\n      keys: {\n        value: function() { return new Iterator(this._list, 'key'); },\n        writable: true, enumerable: true, configurable: true\n      },\n\n      values: {\n        value: function() { return new Iterator(this._list, 'value'); },\n        writable: true, enumerable: true, configurable: true\n      },\n\n      forEach: {\n        value: function(callback) {\n          var thisArg = (arguments.length > 1) ? arguments[1] : undefined;\n          this._list.forEach(function(pair, index) {\n            callback.call(thisArg, pair.value, pair.name);\n          });\n\n        }, writable: true, enumerable: true, configurable: true\n      },\n\n      toString: {\n        value: function () {\n          return urlencoded_serialize(this._list);\n        }, writable: true, enumerable: false, configurable: true\n      }\n    });\n\n    function Iterator(source, kind) {\n      var index = 0;\n      this['next'] = function() {\n        if (index >= source.length)\n          return {done: true, value: undefined};\n        var pair = source[index++];\n        return {done: false, value:\n                kind === 'key' ? pair.name :\n                kind === 'value' ? pair.value :\n                [pair.name, pair.value]};\n      };\n    }\n\n    if ('Symbol' in global && 'iterator' in global.Symbol) {\n      Object.defineProperty(URLSearchParams.prototype, global.Symbol.iterator, {\n        value: URLSearchParams.prototype.entries,\n        writable: true, enumerable: true, configurable: true});\n      Object.defineProperty(Iterator.prototype, global.Symbol.iterator, {\n        value: function() { return this; },\n        writable: true, enumerable: true, configurable: true});\n    }\n\n    function URL(url, base) {\n      if (!(this instanceof global.URL))\n        throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator.\");\n\n      if (base) {\n        url = (function () {\n          if (nativeURL) return new origURL(url, base).href;\n\n          var doc;\n          // Use another document/base tag/anchor for relative URL resolution, if possible\n          if (document.implementation && document.implementation.createHTMLDocument) {\n            doc = document.implementation.createHTMLDocument('');\n          } else if (document.implementation && document.implementation.createDocument) {\n            doc = document.implementation.createDocument('http://www.w3.org/1999/xhtml', 'html', null);\n            doc.documentElement.appendChild(doc.createElement('head'));\n            doc.documentElement.appendChild(doc.createElement('body'));\n          } else if (window.ActiveXObject) {\n            doc = new window.ActiveXObject('htmlfile');\n            doc.write('<head><\\/head><body><\\/body>');\n            doc.close();\n          }\n\n          if (!doc) throw Error('base not supported');\n\n          var baseTag = doc.createElement('base');\n          baseTag.href = base;\n          doc.getElementsByTagName('head')[0].appendChild(baseTag);\n          var anchor = doc.createElement('a');\n          anchor.href = url;\n          return anchor.href;\n        }());\n      }\n\n      // An inner object implementing URLUtils (either a native URL\n      // object or an HTMLAnchorElement instance) is used to perform the\n      // URL algorithms. With full ES5 getter/setter support, return a\n      // regular object For IE8's limited getter/setter support, a\n      // different HTMLAnchorElement is returned with properties\n      // overridden\n\n      var instance = URLUtils(url || '');\n\n      // Detect for ES5 getter/setter support\n      // (an Object.defineProperties polyfill that doesn't support getters/setters may throw)\n      var ES5_GET_SET = (function() {\n        if (!('defineProperties' in Object)) return false;\n        try {\n          var obj = {};\n          Object.defineProperties(obj, { prop: { 'get': function () { return true; } } });\n          return obj.prop;\n        } catch (_) {\n          return false;\n        }\n      })();\n\n      var self = ES5_GET_SET ? this : document.createElement('a');\n\n\n\n      var query_object = new URLSearchParams(\n        instance.search ? instance.search.substring(1) : null);\n      query_object._url_object = self;\n\n      Object.defineProperties(self, {\n        href: {\n          get: function () { return instance.href; },\n          set: function (v) { instance.href = v; tidy_instance(); update_steps(); },\n          enumerable: true, configurable: true\n        },\n        origin: {\n          get: function () {\n            if ('origin' in instance) return instance.origin;\n            return this.protocol + '//' + this.host;\n          },\n          enumerable: true, configurable: true\n        },\n        protocol: {\n          get: function () { return instance.protocol; },\n          set: function (v) { instance.protocol = v; },\n          enumerable: true, configurable: true\n        },\n        username: {\n          get: function () { return instance.username; },\n          set: function (v) { instance.username = v; },\n          enumerable: true, configurable: true\n        },\n        password: {\n          get: function () { return instance.password; },\n          set: function (v) { instance.password = v; },\n          enumerable: true, configurable: true\n        },\n        host: {\n          get: function () {\n            // IE returns default port in |host|\n            var re = {'http:': /:80$/, 'https:': /:443$/, 'ftp:': /:21$/}[instance.protocol];\n            return re ? instance.host.replace(re, '') : instance.host;\n          },\n          set: function (v) { instance.host = v; },\n          enumerable: true, configurable: true\n        },\n        hostname: {\n          get: function () { return instance.hostname; },\n          set: function (v) { instance.hostname = v; },\n          enumerable: true, configurable: true\n        },\n        port: {\n          get: function () { return instance.port; },\n          set: function (v) { instance.port = v; },\n          enumerable: true, configurable: true\n        },\n        pathname: {\n          get: function () {\n            // IE does not include leading '/' in |pathname|\n            if (instance.pathname.charAt(0) !== '/') return '/' + instance.pathname;\n            return instance.pathname;\n          },\n          set: function (v) { instance.pathname = v; },\n          enumerable: true, configurable: true\n        },\n        search: {\n          get: function () { return instance.search; },\n          set: function (v) {\n            if (instance.search === v) return;\n            instance.search = v; tidy_instance(); update_steps();\n          },\n          enumerable: true, configurable: true\n        },\n        searchParams: {\n          get: function () { return query_object; },\n          enumerable: true, configurable: true\n        },\n        hash: {\n          get: function () { return instance.hash; },\n          set: function (v) { instance.hash = v; tidy_instance(); },\n          enumerable: true, configurable: true\n        },\n        toString: {\n          value: function() { return instance.toString(); },\n          enumerable: false, configurable: true\n        },\n        valueOf: {\n          value: function() { return instance.valueOf(); },\n          enumerable: false, configurable: true\n        }\n      });\n\n      function tidy_instance() {\n        var href = instance.href.replace(/#$|\\?$|\\?(?=#)/g, '');\n        if (instance.href !== href)\n          instance.href = href;\n      }\n\n      function update_steps() {\n        query_object._setList(instance.search ? urlencoded_parse(instance.search.substring(1)) : []);\n        query_object._update_steps();\n      };\n\n      return self;\n    }\n\n    if (origURL) {\n      for (var i in origURL) {\n        if (origURL.hasOwnProperty(i) && typeof origURL[i] === 'function')\n          URL[i] = origURL[i];\n      }\n    }\n\n    global.URL = URL;\n    global.URLSearchParams = URLSearchParams;\n  }());\n\n  // Patch native URLSearchParams constructor to handle sequences/records\n  // if necessary.\n  (function() {\n    if (new global.URLSearchParams([['a', 1]]).get('a') === '1' &&\n        new global.URLSearchParams({a: 1}).get('a') === '1')\n      return;\n    var orig = global.URLSearchParams;\n    global.URLSearchParams = function(init) {\n      if (init && typeof init === 'object' && isSequence(init)) {\n        var o = new orig();\n        toArray(init).forEach(function(e) {\n          if (!isSequence(e)) throw TypeError();\n          var nv = toArray(e);\n          if (nv.length !== 2) throw TypeError();\n          o.append(nv[0], nv[1]);\n        });\n        return o;\n      } else if (init && typeof init === 'object') {\n        o = new orig();\n        Object.keys(init).forEach(function(key) {\n          o.set(key, init[key]);\n        });\n        return o;\n      } else {\n        return new orig(init);\n      }\n    };\n  }());\n\n}(self));\n",
    "/* global define, KeyboardEvent, module */\n\n(function () {\n\n  var keyboardeventKeyPolyfill = {\n    polyfill: polyfill,\n    keys: {\n      3: 'Cancel',\n      6: 'Help',\n      8: 'Backspace',\n      9: 'Tab',\n      12: 'Clear',\n      13: 'Enter',\n      16: 'Shift',\n      17: 'Control',\n      18: 'Alt',\n      19: 'Pause',\n      20: 'CapsLock',\n      27: 'Escape',\n      28: 'Convert',\n      29: 'NonConvert',\n      30: 'Accept',\n      31: 'ModeChange',\n      32: ' ',\n      33: 'PageUp',\n      34: 'PageDown',\n      35: 'End',\n      36: 'Home',\n      37: 'ArrowLeft',\n      38: 'ArrowUp',\n      39: 'ArrowRight',\n      40: 'ArrowDown',\n      41: 'Select',\n      42: 'Print',\n      43: 'Execute',\n      44: 'PrintScreen',\n      45: 'Insert',\n      46: 'Delete',\n      48: ['0', ')'],\n      49: ['1', '!'],\n      50: ['2', '@'],\n      51: ['3', '#'],\n      52: ['4', '$'],\n      53: ['5', '%'],\n      54: ['6', '^'],\n      55: ['7', '&'],\n      56: ['8', '*'],\n      57: ['9', '('],\n      91: 'OS',\n      93: 'ContextMenu',\n      144: 'NumLock',\n      145: 'ScrollLock',\n      181: 'VolumeMute',\n      182: 'VolumeDown',\n      183: 'VolumeUp',\n      186: [';', ':'],\n      187: ['=', '+'],\n      188: [',', '<'],\n      189: ['-', '_'],\n      190: ['.', '>'],\n      191: ['/', '?'],\n      192: ['`', '~'],\n      219: ['[', '{'],\n      220: ['\\\\', '|'],\n      221: [']', '}'],\n      222: [\"'\", '\"'],\n      224: 'Meta',\n      225: 'AltGraph',\n      246: 'Attn',\n      247: 'CrSel',\n      248: 'ExSel',\n      249: 'EraseEof',\n      250: 'Play',\n      251: 'ZoomOut'\n    }\n  };\n\n  // Function keys (F1-24).\n  var i;\n  for (i = 1; i < 25; i++) {\n    keyboardeventKeyPolyfill.keys[111 + i] = 'F' + i;\n  }\n\n  // Printable ASCII characters.\n  var letter = '';\n  for (i = 65; i < 91; i++) {\n    letter = String.fromCharCode(i);\n    keyboardeventKeyPolyfill.keys[i] = [letter.toLowerCase(), letter.toUpperCase()];\n  }\n\n  function polyfill () {\n    if (!('KeyboardEvent' in window) ||\n        'key' in KeyboardEvent.prototype) {\n      return false;\n    }\n\n    // Polyfill `key` on `KeyboardEvent`.\n    var proto = {\n      get: function (x) {\n        var key = keyboardeventKeyPolyfill.keys[this.which || this.keyCode];\n\n        if (Array.isArray(key)) {\n          key = key[+this.shiftKey];\n        }\n\n        return key;\n      }\n    };\n    Object.defineProperty(KeyboardEvent.prototype, 'key', proto);\n    return proto;\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define('keyboardevent-key-polyfill', keyboardeventKeyPolyfill);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    module.exports = keyboardeventKeyPolyfill;\n  } else if (window) {\n    window.keyboardeventKeyPolyfill = keyboardeventKeyPolyfill;\n  }\n\n})();\n",
    "// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n",
    "var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function() {\n  root.requestAnimationFrame = raf\n  root.cancelAnimationFrame = caf\n}\n",
    "// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n",
    "var raf = require('raf'),\n    COMPLETE = 'complete',\n    CANCELED = 'canceled';\n\nfunction setElementScroll(element, x, y){\n    if(element === window){\n        element.scrollTo(x, y);\n    }else{\n        element.scrollLeft = x;\n        element.scrollTop = y;\n    }\n}\n\nfunction getTargetScrollLocation(target, parent, align){\n    var targetPosition = target.getBoundingClientRect(),\n        parentPosition,\n        x,\n        y,\n        differenceX,\n        differenceY,\n        targetWidth,\n        targetHeight,\n        leftAlign = align && align.left != null ? align.left : 0.5,\n        topAlign = align && align.top != null ? align.top : 0.5,\n        leftOffset = align && align.leftOffset != null ? align.leftOffset : 0,\n        topOffset = align && align.topOffset != null ? align.topOffset : 0,\n        leftScalar = leftAlign,\n        topScalar = topAlign;\n\n    if(parent === window){\n        targetWidth = Math.min(targetPosition.width, window.innerWidth);\n        targetHeight = Math.min(targetPosition.height, window.innerHeight);\n        x = targetPosition.left + window.pageXOffset - window.innerWidth * leftScalar + targetWidth * leftScalar;\n        y = targetPosition.top + window.pageYOffset - window.innerHeight * topScalar + targetHeight * topScalar;\n        x = Math.max(Math.min(x, document.body.scrollWidth - window.innerWidth * leftScalar), 0);\n        y = Math.max(Math.min(y, document.body.scrollHeight- window.innerHeight * topScalar), 0);\n        x -= leftOffset;\n        y -= topOffset;\n        differenceX = x - window.pageXOffset;\n        differenceY = y - window.pageYOffset;\n    }else{\n        targetWidth = targetPosition.width;\n        targetHeight = targetPosition.height;\n        parentPosition = parent.getBoundingClientRect();\n        var offsetLeft = targetPosition.left - (parentPosition.left - parent.scrollLeft);\n        var offsetTop = targetPosition.top - (parentPosition.top - parent.scrollTop);\n        x = offsetLeft + (targetWidth * leftScalar) - parent.clientWidth * leftScalar;\n        y = offsetTop + (targetHeight * topScalar) - parent.clientHeight * topScalar;\n        x = Math.max(Math.min(x, parent.scrollWidth - parent.clientWidth), 0);\n        y = Math.max(Math.min(y, parent.scrollHeight - parent.clientHeight), 0);\n        x -= leftOffset;\n        y -= topOffset;\n        differenceX = x - parent.scrollLeft;\n        differenceY = y - parent.scrollTop;\n    }\n\n    return {\n        x: x,\n        y: y,\n        differenceX: differenceX,\n        differenceY: differenceY\n    };\n}\n\nfunction animate(parent){\n    raf(function(){\n        var scrollSettings = parent._scrollSettings;\n        if(!scrollSettings){\n            return;\n        }\n\n        var location = getTargetScrollLocation(scrollSettings.target, parent, scrollSettings.align),\n            time = Date.now() - scrollSettings.startTime,\n            timeValue = Math.min(1 / scrollSettings.time * time, 1);\n\n        if(\n            time > scrollSettings.time + 20\n        ){\n            setElementScroll(parent, location.x, location.y);\n            parent._scrollSettings = null;\n            return scrollSettings.end(COMPLETE);\n        }\n\n        var easeValue = 1 - scrollSettings.ease(timeValue);\n\n        setElementScroll(parent,\n            location.x - location.differenceX * easeValue,\n            location.y - location.differenceY * easeValue\n        );\n\n        animate(parent);\n    });\n}\nfunction transitionScrollTo(target, parent, settings, callback){\n    var idle = !parent._scrollSettings,\n        lastSettings = parent._scrollSettings,\n        now = Date.now(),\n        endHandler;\n\n    if(lastSettings){\n        lastSettings.end(CANCELED);\n    }\n\n    function end(endType){\n        parent._scrollSettings = null;\n        if(parent.parentElement && parent.parentElement._scrollSettings){\n            parent.parentElement._scrollSettings.end(endType);\n        }\n        callback(endType);\n        parent.removeEventListener('touchstart', endHandler);\n    }\n\n    parent._scrollSettings = {\n        startTime: lastSettings ? lastSettings.startTime : Date.now(),\n        target: target,\n        time: settings.time + (lastSettings ? now - lastSettings.startTime : 0),\n        ease: settings.ease,\n        align: settings.align,\n        end: end\n    };\n\n    endHandler = end.bind(null, CANCELED);\n    parent.addEventListener('touchstart', endHandler);\n\n    if(idle){\n        animate(parent);\n    }\n}\n\nfunction isScrollable(element){\n    return (\n        parent === window ||\n        (\n            element.scrollHeight !== element.clientHeight ||\n            element.scrollWidth !== element.clientWidth\n        ) &&\n        getComputedStyle(element).overflow !== 'hidden'\n    );\n}\n\nfunction defaultValidTarget(){\n    return true;\n}\n\nmodule.exports = function(target, settings, callback){\n    if(!target){\n        return;\n    }\n\n    if(typeof settings === 'function'){\n        callback = settings;\n        settings = null;\n    }\n\n    if(!settings){\n        settings = {};\n    }\n\n    settings.time = isNaN(settings.time) ? 1000 : settings.time;\n    settings.ease = settings.ease || function(v){return 1 - Math.pow(1 - v, v / 2);};\n\n    var parent = target.parentElement,\n        parents = 0;\n\n    function done(endType){\n        parents--;\n        if(!parents){\n            callback && callback(endType);\n        }\n    }\n\n    var validTarget = settings.validTarget || defaultValidTarget;\n\n    while(parent){\n        if(validTarget(parent, parents) && isScrollable(parent)){\n            parents++;\n            transitionScrollTo(target, parent, settings, done);\n        }\n\n        parent = parent.parentElement;\n\n        if(!parent){\n            return;\n        }\n\n        if(parent.tagName === 'BODY'){\n            parent = window;\n        }\n    }\n};\n",
    "(function() {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  var support = {\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob();\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = xhr.getAllResponseHeaders().trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this._initBody(bodyInit)\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers;\n  self.Request = Request;\n  self.Response = Response;\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return;\n      }\n\n      xhr.onload = function() {\n        var status = (xhr.status === 1223) ? 204 : xhr.status\n        if (status < 100 || status > 599) {\n          reject(new TypeError('Network request failed'))\n          return\n        }\n        var options = {\n          status: status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})();\n"
  ]
}